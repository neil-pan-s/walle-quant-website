(self["webpackJsonp"]=self["webpackJsonp"]||[]).push([["chunk-6c5456c8"],{"1a00":function(n,e,t){},2211:function(n,e,t){n.exports=function(n){var e={};function t(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return n[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=n,t.c=e,t.d=function(n,e,i){t.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:i})},t.r=function(n){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},t.t=function(n,e){if(1&e&&(n=t(n)),8&e)return n;if(4&e&&"object"===typeof n&&n&&n.__esModule)return n;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var o in n)t.d(i,o,function(e){return n[e]}.bind(null,o));return i},t.n=function(n){var e=n&&n.__esModule?function(){return n["default"]}:function(){return n};return t.d(e,"a",e),e},t.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},t.p="/dist/",t(t.s=109)}({0:function(n,e,t){"use strict";function i(n,e,t,i,o,s,a,l){var r,c="function"===typeof n?n.options:n;if(e&&(c.render=e,c.staticRenderFns=t,c._compiled=!0),i&&(c.functional=!0),s&&(c._scopeId="data-v-"+s),a?(r=function(n){n=n||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,n||"undefined"===typeof __VUE_SSR_CONTEXT__||(n=__VUE_SSR_CONTEXT__),o&&o.call(this,n),n&&n._registeredComponents&&n._registeredComponents.add(a)},c._ssrRegister=r):o&&(r=l?function(){o.call(this,this.$root.$options.shadowRoot)}:o),r)if(c.functional){c._injectStyles=r;var u=c.render;c.render=function(n,e){return r.call(e),u(n,e)}}else{var f=c.beforeCreate;c.beforeCreate=f?[].concat(f,r):[r]}return{exports:n,options:c}}t.d(e,"a",(function(){return i}))},109:function(n,e,t){"use strict";t.r(e);var i=function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("i",{class:"el-icon-"+n.name})},o=[];i._withStripped=!0;var s={name:"ElIcon",props:{name:String}},a=s,l=t(0),r=Object(l["a"])(a,i,o,!1,null,null,null);r.options.__file="packages/icon/src/icon.vue";var c=r.exports;c.install=function(n){n.component(c.name,c)};e["default"]=c}})},"462a":function(n,e,t){"use strict";t.r(e);var i=function(){var n=this,e=n.$createElement,t=n._self._c||e;return n.show?t("div",{class:{editor:!0,fullscreen:n.isFullScreen}},[t("ul",{staticClass:"nav"},[t("li",{staticClass:"title logo"},[n._v(" 壹缠 - 策略脚本编辑器 ")]),t("li",{staticClass:"title",on:{click:n.rename}},[n._v(" 策略名 - "+n._s(n.name.toUpperCase())+" "),t("i",{staticClass:"el-icon-edit",attrs:{title:"修改策略名"}})]),t("li",{staticClass:"title",on:{click:n.remove}},[n._v("删除 "),t("i",{staticClass:"el-icon-delete"})]),t("li",{staticClass:"title",on:{click:function(e){return n.save({tips:!0})}}},[n._v("保存(Ctrl+S) "),t("i",{staticClass:"el-icon-circle-check"})]),t("el-dropdown",[t("span",{staticClass:"el-dropdown-link"},[n._v(" 打开"),t("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t("el-dropdown-menu",{staticClass:"editor-dropdown",attrs:{slot:"dropdown"},slot:"dropdown"},[n._l(n.list,(function(e){return t("el-dropdown-item",{key:e,nativeOn:{click:function(t){return n.open(e)}}},[n._v(n._s(e.toUpperCase()))])})),0===n.list.length?t("el-dropdown-item",[n._v("无策略脚本")]):n._e()],2)],1),t("li",{on:{click:n.select}},[n._v(" 加载策略到图表 ")]),t("li",{on:{click:n.unselect}},[n._v(" 停用所有策略 ")]),t("el-dropdown",[t("span",{staticClass:"el-dropdown-link"},[n._v(" 示例脚本"),t("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t("el-dropdown-menu",{staticClass:"editor-dropdown",attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{nativeOn:{click:function(e){return n.openExample("hook")}}},[n._v("1. 示例脚本模板")]),t("el-dropdown-item",{nativeOn:{click:function(e){return n.openExample("boll")}}},[n._v("2. BOLL线脚本")]),t("el-dropdown-item",{nativeOn:{click:function(e){return n.openExample("ma")}}},[n._v("3. 均线金叉策略脚本")]),t("el-dropdown-item",{nativeOn:{click:function(e){return n.openExample("webhook")}}},[n._v("4. 日均线信号推送脚本")])],1)],1),n._m(0),n._m(1),n._m(2),t("li",{on:{click:n.toggleFullscreen}},[t("i",{staticClass:"el-icon-full-screen",attrs:{title:"切换半屏/全屏编辑模式"}})]),t("li",{on:{click:n.toggleDisplay}},[t("i",{staticClass:"el-icon-more-outline",attrs:{title:"最小化"}})])],1),n.script.selected?t("div",{staticClass:"tips"},[n._v(" 当前图表运行的策略脚本 - "+n._s(n.script.selected.toUpperCase())+" ")]):n._e(),t("ui-editor",{ref:"editor",attrs:{content:n.content},on:{change:n.onContentChange,save:function(e){return n.save({tips:!0})}}})],1):n._e()},o=[function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("li",[t("a",{attrs:{href:"https://github.com/neil-pan-s/twist-quant/blob/main/PROGRAM.md",target:"_blank"}},[n._v("壹缠API文档")])])},function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("li",[t("a",{attrs:{href:"https://echarts.apache.org/zh/option.html",target:"_blank"}},[n._v("ECharts文档")])])},function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("li",[t("a",{attrs:{href:"https://www.w3school.com.cn/js/index.asp",target:"_blank"}},[n._v("Javascript文档")])])}],s=(t("868d"),t("6770"),t("148d"),t("e3ca")),a=t.n(s),l=t("56d4"),r=t.n(l),c=(t("2484"),t("9da6")),u=t.n(c),f=(t("df26"),t("42c2")),m=(t("f09a"),t("5809")),p=t.n(m),d=(t("456f"),t("aeb2")),h=t.n(d),b=(t("8973"),t("4303")),v=t.n(b),k=(t("ec2b"),t("52e5")),y=t.n(k),w=(t("69443"),t("2211")),x=t.n(w),_=t("4f2b"),g=t("f7a6"),C="\n// 壹缠 - 策略脚本示例模板\n\n// 可调用全局对象:\n// indicator - 指标分析对象（MA、MACD、BOLL） \n// http - 远程接口请求对象 (支持GET和POST请求)\n// webhook - webhook通知对象 (支持通知到企业微信)\n// joinquant - 聚宽本地数据对象 (拉取各周期K线)\n// toast - UI提示信息对象\n// log - DevTools调试信息对象\n\n// 传参数据对象：\n// ohlcv - 当前标的TICK数据\n// klines - 当前标的周期K线数据\n// twist - 壹缠数据对象 (笔段中枢走势数据)\n// echartsCustomSeries - 图表绘图配置数组 (参见 https://echarts.apache.org/zh/option.html#series)\n\n// 当前标的TICK更新时触发\nasync function tick(symbol, ohlcv) {\n  // tips: 不要频繁打印过多信息(影响性能)\n  // log.info('tick', symbol, ohlcv)\n}\n\n// 当前标的周期K线更新时触发 (单个K线周期内3~10s更新一次)\nasync function kline(symbol, level, klines, twist, echartsCustomSeries) {\n  log.info('kline', symbol, level, /* klines, twist, echartsCustomSeries */)\n}\n\n// 策略脚本生命周期函数 - 加载到图表后触发\nasync function create() {\n  log.info('create')\n}\n\n// 策略脚本生命周期函数 - 当前图表标的或周期更换时触发\nasync function update(symbol, level) {\n  log.info('update', symbol, level)\n}\n\n// 策略脚本生命周期函数 - 策略脚本停用后触发\nasync function destroy() {\n  log.info('destroy')\n}\n",O='\n// 壹缠 - Boll线脚本\n\nasync function kline(symbol, level, klines, twist, echartsCustomSeries) {\n  // log.info(\'boll-kline\', symbol, level, /* klines, twist, echartsCustomSeries */)\n\n  const close = klines.map((kline) => +kline.close)\n  const boll = indicator.boll(close)\n\n  echartsCustomSeries.push({\n          name: "BOLL",\n          type: "line",\n          symbol: "none",\n          data: boll.upper,\n          lineStyle: {\n              color: \'#fc97af\',\n              width: 1,\n          },\n          emphasis: {\n              lineStyle: {\n              width: 1,\n              }\n          },\n          sampling: \'lttb\',\n      },\n      {\n          name: "BOLL",\n          type: "line",\n          symbol: "none",\n          data: boll.mid,\n          lineStyle: {\n              color: \'#ccc\',\n              width: 1,\n          },\n          emphasis: {\n              lineStyle: {\n              width: 1,\n              }\n          },\n          sampling: \'lttb\',\n      },\n      {\n          name: "BOLL",\n          type: "line",\n          symbol: "none",\n          data: boll.lower,\n          lineStyle: {\n              color: \'#87f7cf\',\n              width: 1,\n          },\n          emphasis: {\n              lineStyle: {\n              width: 1,\n              }\n          },\n          sampling: \'lttb\',\n      }\n  )\n}',S="\n// 壹缠 - 均线金叉策略脚本\n\nasync function kline(symbol, level, klines, twist, echartsCustomSeries) {\n  // log.info('MA-kline', symbol, level, /* klines, twist, echartsCustomSeries */)\n\n  const close = klines.map((kline) => +kline.close)\n  const ma10 = indicator.ma(close, 10)\n  const ma20 = indicator.ma(close, 20)\n\n  // 如果10日均线金叉20日均线 看多买入\n  if (ma10.slice(-2)[0] <= ma20.slice(-2)[0] && ma10.slice(-1)[0] > ma20.slice(-1)[0]) {\n      toast.info('多头趋势')\n      // ... \n      // 买入操作\n  }\n\n  // 如果10日均线死叉20日均线的 不持仓\n  if (ma10.slice(-2)[0] >= ma20.slice(-2)[0] && ma10.slice(-1)[0] < ma20.slice(-1)[0]) {\n      toast.info('空头趋势')\n      // ... \n      // 卖出清仓操作\n  }\n\n  echartsCustomSeries.push({\n          name: \"MA10\",\n          type: \"line\",\n          symbol: \"none\",\n          data: ma10,\n          lineStyle: {\n              color: '#fc97af',\n              width: 1,\n          },\n          emphasis: {\n              lineStyle: {\n              width: 1,\n              }\n          },\n          sampling: 'lttb',\n      }, {\n          name: \"MA20\",\n          type: \"line\",\n          symbol: \"none\",\n          data: ma20,\n          lineStyle: {\n              color: '#87f7cf',\n              width: 1,\n          },\n          emphasis: {\n              lineStyle: {\n              width: 1,\n              }\n          },\n          sampling: 'lttb',\n      }\n  )\n}",$="\n// 壹缠 - 日均线信号推送脚本 \n// 演示聚宽数据源API和Webhook通知API \n// 注意: \n//  1. 请务必先行安装壹缠插件 (https://one-quant.com/plugin/壹缠浏览器插件安装说明.pdf)\n//  2. 请修改脚本的聚宽账户信息和企业微信webhook地址\n\nlet klinesOfDay = [], ma10OfDay, ma20OfDay\n\n// 企业微信Webhook推送地址\nlet url = 'https://qyapi.weixin.qq.com/cgi-bin/webhook/send?key=xxxxxxxxxxxx'\n\nasync function kline(symbol, level, klines, twist, echartsCustomSeries) {\n    // log.info('kline', symbol, level, /* klines, twist, echartsCustomSeries */)\n\n    // 仅拉取一次日线数据 用于计算日线MA10、MA20\n    if (!klinesOfDay.length) {\n        // 聚宽账户信息\n        joinquant.setAccount('xxxxxxxxxxxx', 'xxxxxxxxxxxx')\n\n        // 将标的代码转为聚宽标的代码格式 即 sh000001 转为 000001.XSHG\n        const symbolOfJoinQuant = joinquant.market.code2symbol(symbol)\n\n        // 拉取近近30交易日 日K线数据 \n        klinesOfDay = await joinquant.captureKline(symbolOfJoinQuant, 'day', 30)\n\n        const close = klinesOfDay.map((kline) => +kline.close)\n\n        ma10OfDay = indicator.ma(close, 10).slice(-1)[0]\n        ma20OfDay = indicator.ma(close, 20).slice(-1)[0]\n    }\n\n    // 调试使用 不要频繁打印信息\n    // log.info(symbol, ma10OfDay, klines.slice(-2)[0].close, klines.slice(-1)[0].close)\n\n    // Webhook推送测试\n    // webhook.notification(symbol + ' MA10:' + ma10OfDay + ' Price:' + klines.slice(-1)[0].close, url)\n\n    // 价格站上10日均线\n    if (klines.slice(-2)[0].close <= ma10OfDay && klines.slice(-1)[0] > ma10OfDay) {\n        toast.info('价格站上10日均线')\n        webhook.notification(symbol + ' 价格站上10日均线', url)\n    }\n\n    // 价格跌破10日均线\n    if (klines.slice(-2)[0].close >= ma10OfDay && klines.slice(-1)[0] < ma10OfDay) {\n        toast.info('价格跌破10日均线')\n        webhook.notification(symbol + ' 价格跌破10日均线', url)\n    }\n\n}",D={hook:C,boll:O,ma:S,webhook:$};_["default"].component(x.a.name,x.a),_["default"].component(y.a.name,y.a),_["default"].component(v.a.name,v.a),_["default"].component(h.a.name,h.a),_["default"].component(p.a.name,p.a);var j={props:["show"],data:function(){return{name:"",content:"",list:{},script:g["a"],isFullScreen:!1,defaultName:"这是一个新策略"}},mounted:function(){this.init()},methods:{toggleDisplay:function(){this.$emit("update:show",!this.$props.show)},toggleFullscreen:function(){this.isFullScreen=!this.isFullScreen},onContentChange:function(){},init:function(){this.name=this.defaultName,this.content="",this.list=g["a"].list(),this.$refs.editor&&this.$refs.editor.setValue(this.content)},openExample:function(n){D[n]&&(this.name=this.defaultName,this.content=D[n],this.$refs.editor&&this.$refs.editor.setValue(this.content))},open:function(n){this.name=n,this.content=g["a"].get(n),this.$refs.editor.setValue(this.content)},remove:function(){var n=this;return Object(f["a"])(r.a.mark((function e(){var t;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n.name!==n.defaultName){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,u.a.confirm("确认删除此策略脚本?","",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});case 5:if(t=e.sent,t){e.next=8;break}return e.abrupt("return");case 8:e.next=13;break;case 10:return e.prev=10,e.t0=e["catch"](2),e.abrupt("return");case 13:g["a"].remove(n.name),n.init();case 15:case"end":return e.stop()}}),e,null,[[2,10]])})))()},save:function(n){var e=n.tips,t=void 0===e||e;if(this.name!==this.defaultName)if(this.name){var i=this.$refs.editor.getValue();i?(g["a"].set(this.name,i),t&&a.a.info("已保存"),this.list=g["a"].list()):t&&a.a.info("策略脚本不能为空")}else t&&a.a.info("策略名不能为空");else t&&a.a.info("请修改策略名")},rename:function(){var n=this;return Object(f["a"])(r.a.mark((function e(){var t,i;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.prompt("请输入新策略名","",{confirmButtonText:"确定",cancelButtonText:"取消"});case 3:i=e.sent,t=i.value,e.next=10;break;case 7:return e.prev=7,e.t0=e["catch"](0),e.abrupt("return");case 10:if(t!==n.name){e.next=12;break}return e.abrupt("return");case 12:if(t){e.next=15;break}return a.a.info("策略名不能为空"),e.abrupt("return");case 15:if(!g["a"].get(t)){e.next=18;break}return a.a.info("已存在同名策略"),e.abrupt("return");case 18:g["a"].rename(t,n.name),n.list=g["a"].list(),n.name=t;case 21:case"end":return e.stop()}}),e,null,[[0,7]])})))()},select:function(){this.save({tips:!1}),g["a"].get(this.name)?g["a"].select(this.name):a.a.info("请先保存策略脚本")},unselect:function(){g["a"].unselect()}}},E=j,T=(t("c1e7"),t("a855"),t("2be6")),A=Object(T["a"])(E,i,o,!1,null,"994b4030",null);e["default"]=A.exports},69443:function(n,e,t){},a855:function(n,e,t){"use strict";var i=t("1a00"),o=t.n(i);o.a},c1e7:function(n,e,t){"use strict";var i=t("ec6e"),o=t.n(i);o.a},ec6e:function(n,e,t){}}]);