(function(e){function t(t){for(var r,i,o=t[0],u=t[1],c=t[2],h=0,l=[];h<o.length;h++)i=o[h],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&l.push(s[i][0]),s[i]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);p&&p(t);while(l.length)l.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,i=1;i<n.length;i++){var o=n[i];0!==s[o]&&(r=!1)}r&&(a.splice(t--,1),e=u(u.s=n[0]))}return e}var r={},i={index:0},s={index:0},a=[];function o(e){return u.p+"js/"+({}[e]||e)+".js"}function u(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.e=function(e){var t=[],n={"chunk-3adbb12c":1,"chunk-d509a03a":1};i[e]?t.push(i[e]):0!==i[e]&&n[e]&&t.push(i[e]=new Promise((function(t,n){for(var r="css/"+({}[e]||e)+".css",s=u.p+r,a=document.getElementsByTagName("link"),o=0;o<a.length;o++){var c=a[o],h=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(h===r||h===s))return t()}var l=document.getElementsByTagName("style");for(o=0;o<l.length;o++){c=l[o],h=c.getAttribute("data-href");if(h===r||h===s)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var r=t&&t.target&&t.target.src||s,a=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");a.code="CSS_CHUNK_LOAD_FAILED",a.request=r,delete i[e],p.parentNode.removeChild(p),n(a)},p.href=s;var f=document.getElementsByTagName("head")[0];f.appendChild(p)})).then((function(){i[e]=0})));var r=s[e];if(0!==r)if(r)t.push(r[2]);else{var a=new Promise((function(t,n){r=s[e]=[t,n]}));t.push(r[2]=a);var c,h=document.createElement("script");h.charset="utf-8",h.timeout=120,u.nc&&h.setAttribute("nonce",u.nc),h.src=o(e);var l=new Error;c=function(t){h.onerror=h.onload=null,clearTimeout(p);var n=s[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+r+": "+i+")",l.name="ChunkLoadError",l.type=r,l.request=i,n[1](l)}s[e]=void 0}};var p=setTimeout((function(){c({type:"timeout",target:h})}),12e4);h.onerror=h.onload=c,document.head.appendChild(h)}return Promise.all(t)},u.m=e,u.c=r,u.d=function(e,t,n){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)u.d(n,r,function(t){return e[t]}.bind(null,r));return n},u.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="",u.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],h=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var p=h;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("1d50")},1:function(e,t){},"1d50":function(e,t,n){"use strict";n.r(t);n("9531"),n("26d3d"),n("2007"),n("41ab");var r=n("4f2b"),i=(n("ef1f"),n("5f2b"));r["a"].use(i["a"]),r["a"].component("ui-twist",(function(){return n.e("chunk-3adbb12c").then(n.bind(null,"51d8"))})),r["a"].component("ui-kchart",(function(){return n.e("chunk-d509a03a").then(n.bind(null,"febf"))}));var s=new i["a"]({routes:[{path:"/:code",component:{template:"<ui-twist></ui-twist>"}},{path:"*",component:{template:"<ui-twist></ui-twist>"}}]}),a=s,o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"walle-app"}},[n("router-view")],1)},u=[],c={name:"app"},h=c,l=(n("e5cd"),n("2be6")),p=Object(l["a"])(h,o,u,!1,null,null,null),f=p.exports,d=(n("d86f"),n("56d4")),v=n.n(d),y=(n("df26"),n("42c2")),g=n("f5f2"),b=n("30c6"),k=n("ce37"),m=(n("7004"),n("2aa5"),n("0d9f"),n("32f5"),n("1adc")),w=n.n(m),j=(n("868d"),n("b151"),function(e){return new Promise((function(t){setTimeout(t,e)}))});function x(e){return Object(y["a"])(v.a.mark((function t(){var n,r,i,s=arguments;return v.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=0;case 1:if(!(n>=3)){t.next=4;break}return t.abrupt("break",20);case 4:return console.log("#RetryWrapper# ".concat(e.name," call ").concat(n," time")),t.prev=5,t.next=8,e.apply(void 0,s);case 8:return r=t.sent,t.abrupt("return",r);case 12:return t.prev=12,t.t0=t["catch"](5),i=t.t0,t.next=17,j(3e3);case 17:n++,t.next=1;break;case 20:throw i;case 21:case"end":return t.stop()}}),t,null,[[5,12]])})))}var O=x,_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"GET",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return window.parent.__Walle_Devtools?window.parent.__Walle_Devtools_Ajax({type:e,url:t,data:n,opts:r}):window.__Walle_Devtools?window.__Walle_Devtools_Ajax({type:e,url:t,data:n,opts:r}):new Promise((function(i,s){console.log("#ajax# request - ".concat(e," - ").concat(t," "),n),w.a.ajax(Object.assign({type:e,url:t,data:n,async:r.async||!0,dataType:r.dataType||"html",success:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];i.apply(void 0,t)},error:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=console).log.apply(e,["#ajax# fail - "].concat(n)),s.apply(void 0,n)}},r))}))},S=function(e,t){var n;return e?(n="application/json"===t.contentType?JSON.stringify(e):w.a.param(e),n):e},C=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=S(t,n);return _("POST",e,r,n)},T=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=S(t,n);return O((function(){return _("GET",e,r,n)}))()},M=function(e){return new Promise((function(t,n){var r=document.createElement("img");r.src=e,r.onload=function(){return t(r)},r.onerror=n,r.onabort=n}))},E=function(e){return window.parent.__Walle_Devtools?window.parent.__Walle_Devtools_Download({url:e}):window.__Walle_Devtools?window.__Walle_Devtools_Download({url:e}):new Promise((function(t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="blob",r.onload=function(){return t(r.response)},r.onerror=n,r.send(null)}))},L={ajax:_,post:C,get:T,getImage:M,getBinary:E};function q(e,t){return P.apply(this,arguments)}function P(){return P=Object(y["a"])(v.a.mark((function e(t,n){var r;return v.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=document.querySelector("#scripts"),r?r.innerHTML="":(r=document.createElement("div"),r.setAttribute("id","scripts"),document.body.appendChild(r)),e.abrupt("return",z(t,(function(){r.innerHTML="",n&&n()}),r));case 3:case"end":return e.stop()}}),e)}))),P.apply(this,arguments)}function z(e,t,n){return H.apply(this,arguments)}function H(){return H=Object(y["a"])(v.a.mark((function e(t,n,r){return v.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,i){var s=document.createElement("script");s.type="text/javascript",s.src=t,s.onload=function(){e(),n&&n()},s.onerror=function(e){i(e)},(r||document.body).appendChild(s)})));case 1:case"end":return e.stop()}}),e)}))),H.apply(this,arguments)}var F=function(){function e(){Object(g["a"])(this,e),Object(k["a"])(this,"requestType","jsonp"),Object(k["a"])(this,"_wss",void 0)}return Object(b["a"])(e,[{key:"use",value:function(e,t){this.requestType=e,t&&(this._wss=t)}},{key:"capture",value:function(){var e=Object(y["a"])(v.a.mark((function e(t,n){return v.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this[this.requestType](t,n));case 1:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"ajax",value:function(){var e=Object(y["a"])(v.a.mark((function e(t){return v.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",L.get(t));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"jsonp",value:function(){var e=Object(y["a"])(v.a.mark((function e(t){var n,r=arguments;return v.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:"_",e.next=3,q(t);case 3:return e.abrupt("return",window[n]);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"node",value:function(){var e=Object(y["a"])(v.a.mark((function e(t){return v.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){var i=n("2f61"),s="",a=i.get(t,(function(t){t.on("data",(function(e){s+=e.toString()})),t.on("end",(function(){e(s)}))}));a.on("error",r)})));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"wss",value:function(){var e=Object(y["a"])(v.a.mark((function e(t,n){return v.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=n.replace("hq_str_",""),e.abrupt("return",this._wss.response(n));case 2:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()}]),e}();n("8d0d"),n("33ef"),n("c78b");function W(e){"1.000001"===e&&(e="sh000001");var t=e.slice(0,2).toLowerCase();return["sz","00","30","12"].includes(t)?"sz":["sh","60","68","11"].includes(t)?"sh":void 0}function G(e){var t=e.replace(/\d+/g,"").toLowerCase(),n=["ss","zn","al","cu","rb","bu","pb","hc","fu","ni","au","ru","wr","ag","sp","sn"],r=["nr","sc","lu","bc"],i=["m","b","a","i","v","l","jd","eb","pp","c","cs","jm","rr","j","y","pg","fb","p","eg","lh","bb"],s=["rm","ma","sa","cj","cy","fg","rs","ri","cf","wh","jr","sm","sr","ta","zc","pf","oi","sf","ap","pk","ur"],a=["tm","tf","ts","ic","if","ih"];return[].concat(n,r,i,s,a).includes(t)}n("62c8");var D=function(){function e(t){Object(g["a"])(this,e),"1.000001"===t&&(t="sh000001"),this.code=t}return Object(b["a"])(e,[{key:"use",value:function(e){this.request=e}},{key:"handle",value:function(){var e=Object(y["a"])(v.a.mark((function e(t,n){var r;return v.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.request.capture(t,"hq_str_"+n);case 2:return r=e.sent,r.includes('"')&&(r=r.split('"')[1]),e.abrupt("return",r.split(","));case 5:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"captureCnStock",value:function(){var e=Object(y["a"])(v.a.mark((function e(){var t,n,r;return v.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.code.toLowerCase(),n="http://hq.sinajs.cn/list=".concat(t),e.next=4,this.handle(n,t);case 4:return r=e.sent,e.abrupt("return",{name:r[0],open:r[1],preclose:r[2],close:r[3],high:r[4],low:r[5],volume:r[8]});case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"captureCnFuture",value:function(){var e=Object(y["a"])(v.a.mark((function e(){var t,n,r;return v.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t="nf_".concat(this.code.toUpperCase()),n="http://hq.sinajs.cn/list=".concat(t),e.next=4,this.handle(n,t);case 4:if(r=e.sent,50!==r.length){e.next=7;break}return e.abrupt("return",{name:r[49],open:r[0],preclose:r[14],close:r[3],high:r[1],low:r[2],volume:r[4]});case 7:return e.abrupt("return",{name:r[0],open:r[2],preclose:r[10],close:r[8],high:r[3],low:r[4],volume:r[14]});case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"captureGlobalFuture",value:function(){var e=Object(y["a"])(v.a.mark((function e(){var t,n,r;return v.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t="hf_".concat(this.code.toUpperCase()),n="http://hq.sinajs.cn/list=".concat(t),e.next=4,this.handle(n,t);case 4:return r=e.sent,e.abrupt("return",{name:r[13],open:r[8],preclose:r[7],close:r[0],high:r[4],low:r[5],volume:r[14]});case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),e}(),K=(n("d6de"),n("8d0f"),n("68b8"),n("f3b8"),n("918c"),function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;Object(g["a"])(this,e),Object(k["a"])(this,"code",void 0),Object(k["a"])(this,"level",void 0),Object(k["a"])(this,"length",100),Object(k["a"])(this,"request",void 0),this.code=t,this.level=n,this.length=r}return Object(b["a"])(e,[{key:"use",value:function(e){this.request=e}},{key:"captureCnStock",value:function(){var t=Object(y["a"])(v.a.mark((function t(){var n;return v.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.level=e.LEVEL_CN_STOCK[this.level],n="https://quotes.sina.cn/cn/api/jsonp.php/_=/CN_MarketDataService.getKLineData?symbol=".concat(this.code,"&scale=").concat(this.level,"&ma=no&datalen=").concat(this.length),t.abrupt("return",this.handle(n));case 3:case"end":return t.stop()}}),t,this)})));function n(){return t.apply(this,arguments)}return n}()},{key:"captureCnFuture",value:function(){var t=Object(y["a"])(v.a.mark((function t(){var n,r;return v.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.LEVEL_CN_FUTURE[this.level],r="https://stock2.finance.sina.com.cn/futures/api/jsonp.php/_=/InnerFuturesNewService.getFewMinLine?symbol=".concat(this.code,"&type=").concat(n),["day","week","month"].includes(this.level)&&(r="https://stock2.finance.sina.com.cn/futures/api/jsonp.php/_=/InnerFuturesNewService.getDailyKLine?symbol=".concat(this.code)),t.abrupt("return",this.handle(r));case 4:case"end":return t.stop()}}),t,this)})));function n(){return t.apply(this,arguments)}return n}()},{key:"captureGlobalFuture",value:function(){var t=Object(y["a"])(v.a.mark((function t(){var n,r;return v.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.LEVEL_GLOBAL_FUTURE[this.level],r="https://gu.sina.cn/ft/api/jsonp.php/_=/GlobalService.getMink?symbol=".concat(this.code,"&type=").concat(n),["day","week","month"].includes(this.level)&&(r="https://stock2.finance.sina.com.cn/futures/api/jsonp.php/_=/GlobalFuturesService.getGlobalFuturesDailyKLine?symbol=".concat(this.code)),t.abrupt("return",this.handle(r));case 4:case"end":return t.stop()}}),t,this)})));function n(){return t.apply(this,arguments)}return n}()},{key:"handle",value:function(){var e=Object(y["a"])(v.a.mark((function e(t){var n,r,i,s,a,o,u,c,h,l;return v.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=[],e.next=3,this.request.capture(t,"_");case 3:for(r=e.sent,"string"===typeof r&&(i="/*<script>location.href='//sina.com';<\/script>*/_=(",s=");",r=r.slice(i.length+1,-s.length),r=JSON.parse(r)),a=!0,o=!1,u=void 0,e.prev=8,c=r[Symbol.iterator]();!(a=(h=c.next()).done);a=!0)l=h.value,n.push({day:l.d||l.date||l.day,close:l.c||l.close,open:l.o||l.open,high:l.h||l.high,low:l.l||l.low,volume:l.v||l.volume});e.next=16;break;case 12:e.prev=12,e.t0=e["catch"](8),o=!0,u=e.t0;case 16:e.prev=16,e.prev=17,a||null==c["return"]||c["return"]();case 19:if(e.prev=19,!o){e.next=22;break}throw u;case 22:return e.finish(19);case 23:return e.finish(16);case 24:return e.abrupt("return",n);case 25:case"end":return e.stop()}}),e,this,[[8,12,16,24],[17,,19,23]])})));function t(t){return e.apply(this,arguments)}return t}()}]),e}());Object(k["a"])(K,"LEVEL_CN_STOCK",{min1:"1",min5:"5",min15:"15",min30:"30",min60:"60",min120:"120",min240:"240",day:"240",week:"1200",month:"7200",year:"86400"}),Object(k["a"])(K,"LEVEL_CN_FUTURE",{min1:"1",min5:"5",min15:"15",min30:"30",min60:"60",min120:"120",min240:"240",day:"day",week:"week",month:"month",year:"year"}),Object(k["a"])(K,"LEVEL_GLOBAL_FUTURE",{min1:"1",min5:"5",min15:"15",min30:"30",min60:"60",min120:"120",min240:"240",day:"day",week:"week",month:"month",year:"year"});n("ef14"),n("cfce"),n("defa");var A=n("cf28"),I=function(){function e(){Object(g["a"])(this,e),Object(k["a"])(this,"codes",void 0),Object(k["a"])(this,"wss",void 0),Object(k["a"])(this,"pool",{}),Object(k["a"])(this,"callbacks",{open:null,message:null,close:null}),Object(k["a"])(this,"request",new F),this.request.use("wss",this)}return Object(b["a"])(e,[{key:"code2symbol",value:function(e){return W(e)?e:G(e)?"nf_"+e.toUpperCase():"hf_"+e.toUpperCase()}},{key:"symbol2code",value:function(e){return e.startsWith("nf_")?e.replace("nf_","").toLowerCase():e.startsWith("hf_")?e.replace("hf_","").toLowerCase():e.toLowerCase()}},{key:"start",value:function(){var e=Object(y["a"])(v.a.mark((function e(t){var n,r,i,s=this;return v.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.length){e.next=2;break}return e.abrupt("return");case 2:this.codes=t,n=t.map((function(e){return s.code2symbol(e)})),r="http:"===location.protocol?"ws://w.sinajs.cn/wskt":"wss://w.sinajs.cn/wskt",i="?list="+n.join(","),this.wss=new WebSocket(r+i),this.wss.onopen=function(e){console.info("#SinaStockWss# connection open ..."),s.callbacks.open&&s.callbacks.open()},this.wss.onmessage=function(e){s.onMessage(e.data),s.callbacks.message&&s.callbacks.message()},this.wss.onclose=function(e){console.info("#SinaStockWss# connection close ..."),s.callbacks.close&&s.callbacks.close()};case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"onMessage",value:function(){var e=Object(y["a"])(v.a.mark((function e(t){var n,r,i,s;return v.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.split("="),r=Object(A["a"])(n,2),i=r[0],s=r[1],this.pool[i]=s;case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"on",value:function(e,t){this.callbacks[e]=t}},{key:"isRunning",value:function(){return this.wss&&1===+this.wss.readyState}},{key:"keepAlive",value:function(){var e=this;this.wss&&setInterval((function(){e.isRunning()||(console.warn("#SinaStockWss# wss restart ..."),e.start(e.codes))}),3e4)}},{key:"stop",value:function(){var e=Object(y["a"])(v.a.mark((function e(){return v.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.wss&&this.wss.close());case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"response",value:function(){var e=Object(y["a"])(v.a.mark((function e(t){return v.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.pool[t]);case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"ohlcvs",value:function(){var e=Object(y["a"])(v.a.mark((function e(){var t,n,r;return v.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t={},e.t0=v.a.keys(this.pool);case 2:if((e.t1=e.t0()).done){e.next=10;break}return n=e.t1.value,r=this.symbol2code(n),e.next=7,this.ohlcv(r);case 7:t[r]=e.sent,e.next=2;break;case 10:return e.abrupt("return",t);case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"ohlcv",value:function(){var e=Object(y["a"])(v.a.mark((function e(t){return v.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.captureStock(t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e["catch"](0),console.warn("#SinaWssCrawler# ohlcv ",e.t0);case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"captureStock",value:function(){var e=Object(y["a"])(v.a.mark((function e(t){var n;return v.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,"1.000001"===t&&(t="sh000001"),n=new D(t),n.use(this.request),!W(t)){e.next=6;break}return e.abrupt("return",n.captureCnStock());case 6:if(!G(t)){e.next=8;break}return e.abrupt("return",n.captureCnFuture());case 8:return e.abrupt("return",n.captureGlobalFuture());case 11:e.prev=11,e.t0=e["catch"](0),console.warn("#SinaWssCrawler# capture ".concat(t," fail"),e.t0);case 14:case"end":return e.stop()}}),e,this,[[0,11]])})));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),V=function(){function e(){Object(g["a"])(this,e),Object(k["a"])(this,"request",new F),Object(k["a"])(this,"wss",new I)}return Object(b["a"])(e,[{key:"use",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"jsonp";this.request.use(e)}},{key:"startWss",value:function(){var e=Object(y["a"])(v.a.mark((function e(t){return v.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.wss.start(t),this.wss.keepAlive();case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"stopWss",value:function(){var e=Object(y["a"])(v.a.mark((function e(){return v.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.wss.stop();case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"captureStock",value:function(){var e=Object(y["a"])(v.a.mark((function e(t){var n,r;return v.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,"1.000001"===t&&(t="sh000001"),!this.wss.isRunning()){e.next=8;break}return e.next=5,this.wss.ohlcv(t);case 5:if(n=e.sent,!n){e.next=8;break}return e.abrupt("return",n);case 8:if(r=new D(t),r.use(this.request),console.log("#SinaStockCrawler# capture ".concat(t," ")),!W(t)){e.next=13;break}return e.abrupt("return",r.captureCnStock());case 13:if(!G(t)){e.next=15;break}return e.abrupt("return",r.captureCnFuture());case 15:return e.abrupt("return",r.captureGlobalFuture());case 18:e.prev=18,e.t0=e["catch"](0),console.warn("#SinaStockCrawler# capture ".concat(t," fail"),e.t0);case 21:case"end":return e.stop()}}),e,this,[[0,18]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"captureKline",value:function(){var e=Object(y["a"])(v.a.mark((function e(t,n,r){var i;return v.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,"1.000001"===t&&(t="sh000001"),i=new K(t,n,r),i.use(this.request),console.log("#SinaKLineCrawler# capture kline ".concat(t," ").concat(n," ").concat(r," ...")),!W(t)){e.next=7;break}return e.abrupt("return",i.captureCnStock());case 7:if(!(r<10)){e.next=9;break}return e.abrupt("return",[]);case 9:if(!G(t)){e.next=11;break}return e.abrupt("return",i.captureCnFuture());case 11:return e.abrupt("return",i.captureGlobalFuture());case 14:e.prev=14,e.t0=e["catch"](0),console.warn("#SinaKLineCrawler# capture kline ".concat(t," ").concat(n," ").concat(r," fail"),e.t0);case 17:case"end":return e.stop()}}),e,this,[[0,14]])})));function t(t,n,r){return e.apply(this,arguments)}return t}()}]),e}(),N=new V,U=(n("11fd"),n("86bf")),R=n.n(U),B=(n("8f0b"),n("7c6c")),J=function(){function e(){Object(g["a"])(this,e)}return Object(b["a"])(e,[{key:"hasGap",value:function(e,t){return+e.high<+t.low||+e.low>+t.high}},{key:"hasContain",value:function(e,t,n){return"forward"===n?+e.high>=+t.high&&+e.low<=+t.low:"backward"===n?+e.high<=+t.high&&+e.low>=+t.low:+e.high<=+t.high&&+e.low>=+t.low||+e.high>=+t.high&&+e.low<=+t.low}}]),e}(),Q=new J,$=function(){function e(){Object(g["a"])(this,e),Object(k["a"])(this,"klines",[]),Object(k["a"])(this,"typings",[]),Object(k["a"])(this,"points",[])}return Object(b["a"])(e,[{key:"parse",value:function(e){this.klines=e,this.typings=[],this.points=[],this.parseGap(),this.parseContain(),this.parseTyping()}},{key:"parseGap",value:function(){for(var e=[],t=0;t<=this.klines.length-2;t++){var n=this.klines.slice(t,t+2),r=Object(A["a"])(n,2),i=r[0],s=r[1];if(e.push(i),Q.hasGap(i,s)){var a=Object.assign({},s);+i.high<+s.low&&(a.low=i.high,a.high=s.low,a.open=i.high,a.close=s.low),+i.low>+s.high&&(a.low=s.high,a.high=i.low,a.open=i.low,a.close=s.high),a&&e.push(a)}}this.klines=e}},{key:"parseContain",value:function(){for(var e=this.klines.slice(0,2),t=2;t<=this.klines.length-1;t++){var n=e.slice(-2),r=Object(A["a"])(n,2),i=r[0],s=r[1],a=this.klines[t];Q.hasContain(s,a)?+i.high<+s.high?(+s.high<+a.high?s.day=a.day:s.day=s.day,s.high=""+Math.max(+s.high,+a.high),s.low=""+Math.max(+s.low,+a.low)):(+s.low>+a.low?s.day=a.day:s.day=s.day,s.high=""+Math.min(+s.high,+a.high),s.low=""+Math.min(+s.low,+a.low)):e.push(a)}this.klines=e}},{key:"parseTyping",value:function(){for(var e,t,n=this,r=[],i=0;i<=this.klines.length-3;i++){var s=this.klines.slice(i,i+3),a=Object(A["a"])(s,3),o=a[0],u=a[1],c=a[2];e=null,+o.high<+u.high&&+c.high<+u.high&&(e={point:[u.day,+u.high],type:"top",kline:u,kindex:i+1}),+o.low>+u.low&&+c.low>+u.low&&(e={point:[u.day,+u.low],type:"bottom",kline:u,kindex:i+1}),e&&r.push(e)}["top","bottom"].forEach((function(i){e=null,n.typings=[];for(var s=0;s<=r.length-1;s++)if(e)if(t=r[s],t.type!==e.type){if(+e.kline.high>=+t.kline.high&&+e.kline.low<=+t.kline.low)continue;n.typings.push(t)}else n.typings.push(t),+e.kline.high>=+t.kline.high&&+e.kline.low<=+t.kline.low||(e=t);else r[s].type===i&&(e=r[s]),n.typings.push(r[s]);r=n.typings}));for(var h=0;h<r.length;h++)this.typings[h].index=h}},{key:"toPoints",value:function(){this.points=[];var e=!0,t=!1,n=void 0;try{for(var r,i=this.typings[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var s=r.value;this.points.push([].concat(Object(B["a"])(s.point),[s.tip||""]))}}catch(a){t=!0,n=a}finally{try{e||null==i["return"]||i["return"]()}finally{if(t)throw n}}return this.points}}]),e}(),X=function(){function e(){Object(g["a"])(this,e),Object(k["a"])(this,"klines",[]),Object(k["a"])(this,"typings",[]),Object(k["a"])(this,"strokes",[]),Object(k["a"])(this,"points",[])}return Object(b["a"])(e,[{key:"isValidStroke",value:function(e,t){if(!e||!t)return!1;if(e.type===t.type)return!1;if(t.kindex-e.kindex<4)return!1;if(t.kindex-e.kindex===4){if("top"===e.type)return this.klines[e.kindex+1].low>this.klines[e.kindex+2].low&&this.klines[e.kindex+2].low>this.klines[e.kindex+3].low;if("bottom"===e.type)return this.klines[e.kindex+1].high<this.klines[e.kindex+2].high&&this.klines[e.kindex+2].high<this.klines[e.kindex+3].high}var n=this.typings[e.index+1],r=this.typings[t.index+1];return!(t.index-e.index===3&&n.kindex-e.kindex<=3&&n.type!==e.type)||("top"===e.type&&t.point[1]<=n.point[1]||"bottom"===e.type&&t.point[1]>=n.point[1]||!this.isValidStroke(n,r))}},{key:"testValidStroke",value:function(e,t,n){var r=this.typings[n+1],i=this.typings[n+2];return this.isValidStroke(e,r)||this.isValidStroke(e,i)}},{key:"parse",value:function(e,t){this.klines=e,this.typings=t,this.strokes=[],this.points=[];for(var n={styping:this.typings[0],etyping:this.typings[0],type:""},r=0;r<this.typings.length;r++){var i=this.typings[r];if(i.kindex-n.styping.kindex<3){if(i.type===n.styping.type&&("top"===n.styping.type&&n.styping.point[1]<i.point[1]||"bottom"===n.styping.type&&n.styping.point[1]>i.point[1])){n.styping=i,n.etyping=i;continue}}else if(i.type!==n.styping.type&&("top"===n.styping.type&&n.etyping.point[1]>i.point[1]||"bottom"===n.styping.type&&n.etyping.point[1]<i.point[1]?n.etyping=i:this.isValidStroke(n.styping,n.etyping)||(n.etyping=i)),i.type===n.styping.type){if(!this.isValidStroke(n.etyping,i)){if(("top"===n.styping.type&&n.styping.point[1]<i.point[1]||"bottom"===n.styping.type&&n.styping.point[1]>i.point[1])&&!this.testValidStroke(n.etyping,i,r)){var s=this.strokes[this.strokes.length-1];if(s&&("top"===n.styping.type&&n.etyping.point[1]>s.styping.point[1]||"bottom"===n.styping.type&&n.etyping.point[1]<s.styping.point[1])){this.strokes.pop(),s.etyping=i,n=s;continue}}continue}if(("top"===n.styping.type&&n.etyping.point[1]<i.point[1]||"bottom"===n.styping.type&&n.etyping.point[1]>i.point[1])&&this.isValidStroke(n.styping,n.etyping)){+n.etyping.point[1]>+n.styping.point[1]?n.type="up":n.type="down",this.strokes.push(n),n={styping:n.etyping,etyping:i,type:""};continue}}}n.tip=" 虚笔",n.styping!==n.etyping||(n.etyping=this.typings[this.typings.length-1]),this.strokes.push(n);for(var a=0;a<this.strokes.length;a++)this.strokes[a].index=a}},{key:"toPoints",value:function(){this.points=[];var e=!0,t=!1,n=void 0;try{for(var r,i=this.strokes[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var s=r.value;s.tip&&s.tip.includes("虚笔")||this.points.push(s.styping.point,[].concat(Object(B["a"])(s.etyping.point),[s.macd,s.tip||""]))}}catch(a){t=!0,n=a}finally{try{e||null==i["return"]||i["return"]()}finally{if(t)throw n}}return this.points}},{key:"toPoints2",value:function(){var e=this.strokes[this.strokes.length-1];return e.tip&&e.tip.includes("虚笔")?[e.styping.point,[].concat(Object(B["a"])(e.etyping.point),[e.macd,e.tip||""])]:[]}}]),e}(),Y=function(){function e(){Object(g["a"])(this,e),Object(k["a"])(this,"strokes",[]),Object(k["a"])(this,"segments",[]),Object(k["a"])(this,"points",[])}return Object(b["a"])(e,[{key:"merge",value:function(e,t,n){var r={};return"up"===n?(r.high=""+Math.max(+e.high,+t.high),r.low=""+Math.max(+e.low,+t.low)):(r.high=""+Math.min(+e.high,+t.high),r.low=""+Math.min(+e.low,+t.low)),r}},{key:"hasGap",value:function(e,t,n,r,i){var s;if(!t||!n)return!1;if(!i){for(var a=e.index+1;a<n.sindex;a+=2){var o=this.strokes[a],u="up"===r?Math.max:Math.min,c="up"===r?o.styping.kline.high:o.styping.kline.low;s=s?u(c,s):c}return"up"===r?s<n.low:s>n.high}s=null;for(var h=t.sindex+2;h<=n.sindex;h+=2){var l=this.strokes[h],p="up"===r?Math.min:Math.max,f="up"===r?l.etyping.kline.low:l.etyping.kline.high;s=s?p(f,s):f}return"up"===r?s>t.high:s<t.low}},{key:"parse",value:function(e){if(this.strokes=e,this.segments=[],this.points=[],this.strokes.length){for(var t,n=[],r=!1,i=this.strokes[0].type,s={sstroke:this.strokes[0],estroke:this.strokes[0],type:i},a=1;a<=this.strokes.length-3;a++){var o=this.strokes.slice(a,a+7),u=Object(A["a"])(o,7),c=u[0],h=u[1],l=u[2],p=u[3],f=u[4],d=u[5],v=u[6],y=function(e){return"up"===e.type?{high:e.etyping.point[1],low:e.styping.point[1],sindex:e.index}:{high:e.styping.point[1],low:e.etyping.point[1],sindex:e.index}},g=y(c),b=y(h),k=y(l),m=(p&&y(p),f?y(f):null);d&&y(d),v&&y(v);if(l.type!==i)if(t){var w=this.segments[this.segments.length-1];if(r&&w&&n.length<2){var j=w.estroke.etyping;if("up"===i&&j.point[1]>k.low||"down"===i&&j.point[1]<k.high){w.estroke=l,r=!1,this.segments.pop(),s=w,n=[],i=w.type,t=b;continue}}if(r&&Q.hasContain(t,k,"backward")&&n.length<2)"down"===i?(t.high=""+Math.min(+t.high,+k.high),t.low=""+Math.min(+t.low,+k.low)):(t.high=""+Math.max(+t.high,+k.high),t.low=""+Math.max(+t.low,+k.low)),t.sindex=l.index,t.isMerged=!0;else if(Q.hasContain(t,k,"forward"))t=this.merge(t,k,i),t.sindex=l.index,t.isMerged=!0;else if(Q.hasContain(t,k,"backward"))n[0]=t,n[1]=k,t=k,s.estroke=h;else if("up"===i&&t.high<k.high||"down"===i&&t.low>k.low)n[0]=t,n[1]=k,t=k,s.estroke=h;else if("up"===i&&t.high>k.high||"down"===i&&t.low<k.low){if(n.length<2){n[0]=t,n[1]=k,t=k,s.estroke=h;continue}m&&n[0]&&n[1]&&(r=this.hasGap(s.sstroke,n[0],n[1],i,t.isMerged),!r&&Q.hasContain(k,m,"forward")&&(a+=1)),this.segments.push(s);var x=s.estroke,O=this.strokes[x.index+1];s={sstroke:O,estroke:O,type:"up"===i?"down":"up"},n=[],i="up"===i?"down":"up",t=b}else;}else t=g}this.segments.shift(),s.tip=" 虚段",s.sstroke!==s.estroke||(s.estroke=this.strokes[this.strokes.length-1]),this.segments.push(s);for(var _=0;_<this.segments.length;_++)this.segments[_].index=_}}},{key:"toPoints",value:function(){this.points=[];var e=!0,t=!1,n=void 0;try{for(var r,i=this.segments[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var s=r.value;s.tip&&s.tip.includes("虚段")||this.points.push(s.sstroke.styping.point,[].concat(Object(B["a"])(s.estroke.etyping.point),[s.macd,s.tip||""]))}}catch(a){t=!0,n=a}finally{try{e||null==i["return"]||i["return"]()}finally{if(t)throw n}}return this.points}},{key:"toPoints2",value:function(){var e=this.segments[this.segments.length-1];return e.tip&&e.tip.includes("虚段")?[e.sstroke.styping.point,[].concat(Object(B["a"])(e.estroke.etyping.point),[e.macd,e.tip||""])]:[]}}]),e}(),Z=function(){function e(){Object(g["a"])(this,e),Object(k["a"])(this,"segments",[]),Object(k["a"])(this,"boxes",[]),Object(k["a"])(this,"points",[])}return Object(b["a"])(e,[{key:"isCoincide",value:function(e){return this.range(e)}},{key:"isExpand",value:function(e,t){var n=this.merge(e.range,t.range);return!n&&(e.range.top<t.range.bottom&&e.range.high>=t.range.low||e.range.bottom>t.range.top&&e.range.low<=t.range.high)}},{key:"isTrend",value:function(e,t){return!this.merge(e.range,t.range)}},{key:"merge",value:function(e,t){var n={};return!(e.bottom>t.top||e.top<t.bottom)&&(n.top=Math.min(e.top,t.top),n.bottom=Math.max(e.bottom,t.bottom),n.high=Math.max(e.high,t.high),n.low=Math.min(e.low,t.low),n)}},{key:"range",value:function(e){if(!(e.length<3)){for(var t,n=0;n<=e.length-3;n++){var r=e.slice(n,n+3),i=Object(A["a"])(r,3),s=i[0],a=i[1],o=i[2],u=void 0;if(s.estroke.etyping.point[1]!==a.sstroke.styping.point[1]||a.estroke.etyping.point[1]!==o.sstroke.styping.point[1])return!1;if("up"===s.type&&s.sstroke.styping.point[1]<o.estroke.etyping.point[1]&&(u={top:Math.min(s.estroke.etyping.point[1],o.estroke.etyping.point[1]),high:Math.max(s.estroke.etyping.point[1],o.estroke.etyping.point[1]),bottom:Math.max(s.sstroke.styping.point[1],o.sstroke.styping.point[1]),low:Math.min(s.sstroke.styping.point[1],o.sstroke.styping.point[1])}),"down"===s.type&&s.sstroke.styping.point[1]>o.estroke.etyping.point[1]&&(u={top:Math.min(s.sstroke.styping.point[1],o.sstroke.styping.point[1]),high:Math.max(s.sstroke.styping.point[1],o.sstroke.styping.point[1]),bottom:Math.max(s.estroke.etyping.point[1],o.estroke.etyping.point[1]),low:Math.min(s.estroke.etyping.point[1],o.estroke.etyping.point[1])}),!u)return!1;if(t){if(t=this.merge(t,u),!t)return!1}else t=u}return t}}},{key:"parse",value:function(e){var t;this.segments=e,this.boxes=[];for(var n=0;n<=this.segments.length-3;n++){var r=this.segments.slice(n,n+3),i=Object(A["a"])(r,3),s=i[0],a=i[1],o=i[2];e=t?[].concat(Object(B["a"])(t.segments),[o]):[s,a,o];var u=this.range(e);if(u){t?t.esegment=o:t={type:s.type,ssegment:s,esegment:o},t.range=u,t.segments=e,t.isLevelUp=e.length>=11;var c=this.boxes[this.boxes.length-1];if(c){var h=this.isExpand(t,c);t.isExpand=h,c.isExpand=c.isExpand||h}}else t&&this.boxes.push(t),t=null}t&&this.boxes.push(t);for(var l=0;l<this.boxes.length;l++)this.boxes[l].index=l}},{key:"toPoints",value:function(){this.points=[];var e=!0,t=!1,n=void 0;try{for(var r,i=this.boxes[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var s=r.value,a=[[s.ssegment.estroke.styping.point[0],s.range.top],[s.esegment.sstroke.etyping.point[0],s.range.top],[s.esegment.sstroke.etyping.point[0],s.range.bottom],[s.ssegment.estroke.styping.point[0],s.range.bottom]];this.points.push(a)}}catch(o){t=!0,n=o}finally{try{e||null==i["return"]||i["return"]()}finally{if(t)throw n}}return this.points}}]),e}();function ee(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=[],r=e.length;if(0===r||t<=0)return n;var i=e[0];n.push(i);for(var s=e[0],a=t*(t+1)/2,o=1;o<r;o++){if(o<t){s+=e[o];for(var u=0,c=0,h=0;h<=o;h++)u+=e[o-h]*(t-h),c+=t-h;i=u/c}else i+=(t*e[o]-s)/a,s+=e[o]-e[o-t];n.push(i)}return n}function te(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=e.length,r=[];if(0===n||t<=0)return r;var i=2/(t+1),s=e[0];r.push(s);for(var a=1;a<n;a++)s=i*e[a]+(1-i)*s,r.push(s);return r}function ne(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=[],r=e.length;if(0===r||t<=0)return n;var i=e[0];n.push(i);for(var s=1;s<r;s++){if(s<t){for(var a=e[0],o=1;o<=s;o++)a+=e[o];i=a/(s+1)}else i+=(e[s]-e[s-t])/t;n.push(i)}return n}function re(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:26,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:9,i=e.length,s=[],a=[],o=[];if(0===i)return{dif:s,dea:o,bar:a};for(var u=te(e,t),c=te(e,n),h=0;h<i;h++)s.push(u[h]-c[h]);o=te(s,r);for(var l=0;l<i;l++)a.push(2*(s[l]-o[l]));return{dif:s,dea:o,bar:a}}var ie={macd:re,ema:te,wma:ee,ma:ne},se=function(){function e(){Object(g["a"])(this,e),Object(k["a"])(this,"klines",[]),Object(k["a"])(this,"twist",{}),Object(k["a"])(this,"parsers",{typing:null,stroke:null,segment:null,box:null,segment2:null,box2:null})}return Object(b["a"])(e,[{key:"init",value:function(e){this.klines=R()(e),this.parsers.typing=new $,this.parsers.stroke=new X,this.parsers.segment=new Y,this.parsers.segment2=new Y,this.parsers.box=new Z,this.parsers.box2=new Z,this.parsers.box0=new Z}},{key:"segment2stroke",value:function(e){var t=[],n=!0,r=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done);n=!0){var o=s.value,u={type:o.type,styping:o.sstroke.styping,etyping:o.estroke.etyping,index:t.length};t.push(u)}}catch(c){r=!0,i=c}finally{try{n||null==a["return"]||a["return"]()}finally{if(r)throw i}}return t}},{key:"stroke2segment",value:function(e){var t=[],n=!0,r=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done);n=!0){var o=s.value,u={type:o.type,sstroke:o,estroke:o,index:t.length};t.push(u)}}catch(c){r=!0,i=c}finally{try{n||null==a["return"]||a["return"]()}finally{if(r)throw i}}return t}},{key:"macd",value:function(e){for(var t=[],n={},r=0;r<e.length;r++)t.push(+e[r].close),n[e[r].day]=r;var i=ie.macd(t);return i.map=n,i}},{key:"update",value:function(e){return this.klines.length===e.length?(this.twist.macd=this.macd(e),this.twist):this.parse(e)}},{key:"parse",value:function(e){this.init(e),this.parsers.typing.parse(this.klines),this.parsers.stroke.parse(this.parsers.typing.klines,this.parsers.typing.typings),this.parsers.segment.parse(this.parsers.stroke.strokes),this.parsers.segment2.parse(this.segment2stroke(this.parsers.segment.segments)),this.parsers.box.parse(this.parsers.segment.segments),this.parsers.box2.parse(this.parsers.segment2.segments),this.parsers.box0.parse(this.stroke2segment(this.parsers.stroke.strokes));var t=this.macd(e),n=new ae;return n.calcStrokes(this.parsers.stroke.strokes,t),n.calcSegments(this.parsers.segment.segments,t),n.calcSegments(this.parsers.segment2.segments,t),this.twist={typing:[],stroke:this.parsers.stroke.toPoints(),segment:this.parsers.segment.toPoints(),segment2:this.parsers.segment2.toPoints(),vstroke:this.parsers.stroke.toPoints2(),vsegment:this.parsers.segment.toPoints2(),vsegment2:this.parsers.segment2.toPoints2(),box:this.parsers.box.toPoints(),box2:this.parsers.box2.toPoints(),box0:[],macd:t},this.twist}}]),e}(),ae=function(){function e(){Object(g["a"])(this,e)}return Object(b["a"])(e,[{key:"calcSegments",value:function(e,t){var n=!0,r=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done);n=!0){var o=s.value,u=o.sstroke.styping.point[0],c=o.estroke.etyping.point[0],h=t.map[u],l=t.map[c],p=this.calcArea(t,h,l);this.toTip(o,p)}}catch(f){r=!0,i=f}finally{try{n||null==a["return"]||a["return"]()}finally{if(r)throw i}}}},{key:"calcStrokes",value:function(e,t){var n=!0,r=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done);n=!0){var o=s.value,u=o.styping.point[0],c=o.etyping.point[0],h=t.map[u],l=t.map[c],p=this.calcArea(t,h,l);this.toTip(o,p)}}catch(f){r=!0,i=f}finally{try{n||null==a["return"]||a["return"]()}finally{if(r)throw i}}}},{key:"calcArea",value:function(e,t,n){var r={red:0,green:0};if(e&&e.bar&&!(e.bar.length<n)){for(var i=t;i<=n;i++){var s=e.bar[i];s>0?r.red+=+s:r.green+=+s}return r}}},{key:"toTip",value:function(e,t){e.macd=this.toString(t,e)}},{key:"toString",value:function(e,t){return"up"===t.type?e.red.toFixed(2):e.green.toFixed(2)}},{key:"toString2",value:function(e){return"Red: ".concat(e.red.toFixed(2)," Green: ").concat(e.green.toFixed(2))}}]),e}(),oe=new se,ue=n("c206"),ce=n.n(ue),he=function(){function e(){Object(g["a"])(this,e),Object(k["a"])(this,"randomIntervalTime",[5,30]),Object(k["a"])(this,"queue",[]),this.startCallbackInQueue()}return Object(b["a"])(e,[{key:"isWeekend",value:function(){var e=ce()().weekday();return![1,2,3,4,5].includes(e)}},{key:"isTradingTime",value:function(){var e=+ce()().format("HHmmss"),t=[92500,113e3],n=[13e4,15e4];return t[0]<=e&&e<=t[1]||n[0]<=e&&e<=n[1]}},{key:"isWeekdayTradingTime",value:function(){return!this.isWeekend()&&this.isTradingTime()}},{key:"startCallbackInQueue",value:function(){var e=Object(y["a"])(v.a.mark((function e(){var t;return v.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=3,j(100);case 3:if(this.queue.length){e.next=5;break}return e.abrupt("continue",0);case 5:return t=this.queue.shift(),e.next=8,t();case 8:e.next=0;break;case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"interval",value:function(){var e=Object(y["a"])(v.a.mark((function e(t,n){var r,i,s=this,a=arguments;return v.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]?a[2]:60,a.length>3?a[3]:void 0,i=setInterval(Object(y["a"])(v.a.mark((function e(){var r,i;return v.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(console.log("."),r=!1,!r&&!s.isWeekdayTradingTime()){e.next=7;break}if(i=ce()().format("HH:mm"),!n||n.includes(i)){e.next=6;break}return e.abrupt("return");case 6:s.queue.push(t);case 7:case"end":return e.stop()}}),e)}))),1e3*r),e.abrupt("return",i);case 4:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"wait",value:function(e){return j(e)}},{key:"until",value:function(e,t){return new Promise((function(n){var r=setInterval((function(){var i=ce()().format("HHmmss");+i>=+e&&(clearInterval(r),t&&t(),n())}),1e3)}))}},{key:"random",value:function(){var e=this.randomIntervalTime[0],t=this.randomIntervalTime[1],n=Math.floor(Math.random()*(t-e+1)+e);return j(60*n*1e3)}}]),e}(),le=new he,pe=function(){function e(){Object(g["a"])(this,e)}return Object(b["a"])(e,[{key:"captureKline",value:function(){var e=Object(y["a"])(v.a.mark((function e(t,r,i){var s,a,o;return v.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s={min1:function(){return n.e("chunk-2d22bcca").then(n.t.bind(null,"f109",3))},min5:function(){return n.e("chunk-2d0cf120").then(n.t.bind(null,"61c2",3))},min15:function(){return n.e("chunk-2d0a47b9").then(n.t.bind(null,"0740",3))},min30:function(){return n.e("chunk-2d0c7e69").then(n.t.bind(null,"531f",3))},min60:function(){return n.e("chunk-2d0a4bd7").then(n.t.bind(null,"0870",3))},min120:function(){return n.e("chunk-2d0e9724").then(n.t.bind(null,"8e23",3))},min240:function(){return n.e("chunk-2d2225d6").then(n.t.bind(null,"cdfe",3))},day:function(){return n.e("chunk-2d0efd59").then(n.t.bind(null,"9a94",3))}},e.next=3,s[r]();case 3:return a=e.sent,o=a["default"],e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)})));function t(t,n,r){return e.apply(this,arguments)}return t}()}]),e}(),fe=new pe,de=function(){function e(t){var n=t.isHS;Object(g["a"])(this,e),Object(k["a"])(this,"isHS",!1),this.isHS=n}return Object(b["a"])(e,[{key:"generate",value:function(e,t){var n=null,r=[],i=!0,s=!1,a=void 0;try{for(var o,u=t[Symbol.iterator]();!(i=(o=u.next()).done);i=!0){var c=o.value;c=Object.assign({},c),n?ce()(c.day)[e]()===ce()(n.day)[e]()?(n.high=+(c.high>n.high?c.high:n.high),n.low=+(c.low<n.low?c.low:n.low),n.close=+c.close,n.day=c.day,n.volume+=+c.volume):(r.push(n),n=c,n.volume=+n.volume):(n=c,n.volume=+n.volume)}}catch(h){s=!0,a=h}finally{try{i||null==u["return"]||u["return"]()}finally{if(s)throw a}}return r.push(n),r}},{key:"week",value:function(e){return this.generate("week",e)}},{key:"month",value:function(e){return this.generate("month",e)}},{key:"year",value:function(e){return this.generate("year",e)}}]),e}();Object(k["a"])(de,"LEVEL",{week:"week",month:"month",year:"year"});var ve=function(){function e(t){var n=t.isHS;Object(g["a"])(this,e),Object(k["a"])(this,"isHS",!1),this.isHS=n}return Object(b["a"])(e,[{key:"generate",value:function(e,t){for(var n=null,r=[],i=0;i<t.length;i++){var s=Object.assign({},t[i]);if(n){if(60===e&&this.isHS){var a=ce()(s.day).format("HH:mm");if(["09:31","10:31","13:01","14:01"].includes(a)){r.push(n),n=s,n.volume=+n.volume;continue}}else if(ce()(s.day).minute()%e===1){r.push(n),n=s,n.volume=+n.volume;continue}n.high=+(s.high>n.high?s.high:n.high),n.low=+(s.low<n.low?s.low:n.low),n.close=+s.close,n.day=s.day,n.volume+=+s.volume}else{var o=ce()(s.day).minute();if(o%e!==1)continue;n=s,n.volume=+n.volume}}return r.push(n),r}},{key:"min5",value:function(e){return this.generate(5,e)}},{key:"min15",value:function(e){return this.generate(15,e)}},{key:"min30",value:function(e){return this.generate(30,e)}},{key:"min60",value:function(e){return this.generate(60,e)}}]),e}();Object(k["a"])(ve,"LEVEL",{min5:5,min15:15,min30:30,min60:60});var ye=function(){function e(t){Object(g["a"])(this,e),Object(k["a"])(this,"klines",{min:[],day:[]}),Object(k["a"])(this,"generator",{min:null,day:null}),Object(k["a"])(this,"code",void 0),Object(k["a"])(this,"length",1e4),Object(k["a"])(this,"timestamp",0),Object(k["a"])(this,"interval",30),Object(k["a"])(this,"intervalId",-1),Object(k["a"])(this,"crawler",void 0),Object(k["a"])(this,"isHS",!0),this.code="sh000001"===t?"1.000001":t,this.isHS=["sz","sh"].includes(this.code.slice(0,2)),this.generator.min=new ve({isHS:this.isHS}),this.generator.day=new de({isHS:this.isHS}),this.crawler=window.__is_twist_mock?fe:N}return Object(b["a"])(e,[{key:"now",value:function(){var e=Object(y["a"])(v.a.mark((function e(){return v.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.crawler.captureStock(this.code));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"update",value:function(){var e=Object(y["a"])(v.a.mark((function e(){var t,n,r,i,s,a,o,u,c;return v.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.isHS){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.crawler.captureKline(this.code,"min1",3);case 4:for(t=e.sent,n=!0,r=!1,i=void 0,e.prev=8,s=t[Symbol.iterator]();!(n=(a=s.next()).done);n=!0)o=a.value,u=new Date(this.timestamp).getTime(),c=new Date(o.day).getTime(),c===u&&(this.klines.min[this.klines.min.length-1]=o),c>u&&(this.klines.min.push(o),this.timestamp=o.day);e.next=16;break;case 12:e.prev=12,e.t0=e["catch"](8),r=!0,i=e.t0;case 16:e.prev=16,e.prev=17,n||null==s["return"]||s["return"]();case 19:if(e.prev=19,!r){e.next=22;break}throw i;case 22:return e.finish(19);case 23:return e.finish(16);case 24:case"end":return e.stop()}}),e,this,[[8,12,16,24],[17,,19,23]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"loop",value:function(){var e=Object(y["a"])(v.a.mark((function e(t,n){var r=this;return v.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!window.__is_twist_mock){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,le.interval(Object(y["a"])(v.a.mark((function e(){return v.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r.update();case 2:return e.next=4,n();case 4:case"end":return e.stop()}}),e)}))),null,t||this.interval);case 4:this.intervalId=e.sent;case 5:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"stop",value:function(){var e=Object(y["a"])(v.a.mark((function e(){return v.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:clearInterval(this.intervalId);case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"min1",value:function(){var e=Object(y["a"])(v.a.mark((function e(){return v.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.klines.min.length){e.next=2;break}return e.abrupt("return",this.klines.min);case 2:return e.next=4,this.crawler.captureKline(this.code,"min1",this.length);case 4:return this.klines.min=e.sent,this.timestamp=this.klines.min[this.klines.min.length-1].day,e.abrupt("return",this.klines.min);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"min5",value:function(){var e=Object(y["a"])(v.a.mark((function e(){var t;return v.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.min1();case 2:if(t=e.sent,!(t.length/5>1023)){e.next=5;break}return e.abrupt("return",this.generator.min.min5(t));case 5:return e.abrupt("return",this.crawler.captureKline(this.code,"min5",this.length));case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"min15",value:function(){var e=Object(y["a"])(v.a.mark((function e(){return v.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.crawler.captureKline(this.code,"min15",this.length));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"min30",value:function(){var e=Object(y["a"])(v.a.mark((function e(){return v.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.crawler.captureKline(this.code,"min30",this.length));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"min60",value:function(){var e=Object(y["a"])(v.a.mark((function e(){return v.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.crawler.captureKline(this.code,"min60",this.length));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"min120",value:function(){var e=Object(y["a"])(v.a.mark((function e(){return v.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.crawler.captureKline(this.code,"min120",this.length));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"min240",value:function(){var e=Object(y["a"])(v.a.mark((function e(){return v.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.crawler.captureKline(this.code,"min240",this.length));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"day",value:function(){var e=Object(y["a"])(v.a.mark((function e(){return v.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.klines.day.length){e.next=2;break}return e.abrupt("return",this.klines.day);case 2:return e.next=4,this.crawler.captureKline(this.code,"day",this.length);case 4:return this.klines.day=e.sent,e.abrupt("return",this.klines.day);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"week",value:function(){var e=Object(y["a"])(v.a.mark((function e(){var t;return v.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.day();case 2:return t=e.sent,e.abrupt("return",this.generator.day.week(t));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"month",value:function(){var e=Object(y["a"])(v.a.mark((function e(){var t;return v.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.day();case 2:return t=e.sent,e.abrupt("return",this.generator.day.month(t));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"year",value:function(){var e=Object(y["a"])(v.a.mark((function e(){var t;return v.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.day();case 2:return t=e.sent,e.abrupt("return",this.generator.day.year(t));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}],[{key:"create",value:function(){var t=Object(y["a"])(v.a.mark((function t(n){return v.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new e(n));case 1:case"end":return t.stop()}}),t)})));function n(e){return t.apply(this,arguments)}return n}()}]),e}();window.__Walle_Stock_Twist={crawler:ye,indicator:ie,processor:oe,sina:N},"#/"===location.hash&&(window.__is_twist_mock=!0),window.console.log=function(){},r["a"].config.productionTip=!1;var ge=new r["a"]({router:a,render:function(e){return e(f)}}).$mount("#walle-app");t["default"]=ge},2:function(e,t){},3113:function(e,t,n){var r={"./af":"f064","./af.js":"f064","./ar":"35c3","./ar-dz":"d68a","./ar-dz.js":"d68a","./ar-kw":"49cd","./ar-kw.js":"49cd","./ar-ly":"1b3b","./ar-ly.js":"1b3b","./ar-ma":"847d","./ar-ma.js":"847d","./ar-sa":"bb68","./ar-sa.js":"bb68","./ar-tn":"e4cc","./ar-tn.js":"e4cc","./ar.js":"35c3","./az":"6555","./az.js":"6555","./be":"9106","./be.js":"9106","./bg":"fa7e","./bg.js":"fa7e","./bm":"4d38","./bm.js":"4d38","./bn":"6881","./bn.js":"6881","./bo":"4166","./bo.js":"4166","./br":"890a","./br.js":"890a","./bs":"10be","./bs.js":"10be","./ca":"bddf","./ca.js":"bddf","./cs":"2bed","./cs.js":"2bed","./cv":"26dd","./cv.js":"26dd","./cy":"b168","./cy.js":"b168","./da":"61c1","./da.js":"61c1","./de":"04a6","./de-at":"3aaf","./de-at.js":"3aaf","./de-ch":"8476","./de-ch.js":"8476","./de.js":"04a6","./dv":"c3c1","./dv.js":"c3c1","./el":"b526","./el.js":"b526","./en-SG":"706c","./en-SG.js":"706c","./en-au":"1e0c","./en-au.js":"1e0c","./en-ca":"6724","./en-ca.js":"6724","./en-gb":"7b16","./en-gb.js":"7b16","./en-ie":"c8ac","./en-ie.js":"c8ac","./en-il":"4c1e","./en-il.js":"4c1e","./en-nz":"883c","./en-nz.js":"883c","./eo":"e1bb","./eo.js":"e1bb","./es":"18d3","./es-do":"47b9","./es-do.js":"47b9","./es-us":"36cb","./es-us.js":"36cb","./es.js":"18d3","./et":"64e8","./et.js":"64e8","./eu":"9050","./eu.js":"9050","./fa":"f028","./fa.js":"f028","./fi":"bdc3","./fi.js":"bdc3","./fo":"f188","./fo.js":"f188","./fr":"63c2","./fr-ca":"b7e6","./fr-ca.js":"b7e6","./fr-ch":"48f5","./fr-ch.js":"48f5","./fr.js":"63c2","./fy":"4f73","./fy.js":"4f73","./ga":"368c","./ga.js":"368c","./gd":"1896","./gd.js":"1896","./gl":"31d0","./gl.js":"31d0","./gom-latn":"e63d","./gom-latn.js":"e63d","./gu":"7d8d","./gu.js":"7d8d","./he":"0020","./he.js":"0020","./hi":"dd6a","./hi.js":"dd6a","./hr":"3a73","./hr.js":"3a73","./hu":"1109","./hu.js":"1109","./hy-am":"30d7","./hy-am.js":"30d7","./id":"d32a","./id.js":"d32a","./is":"4e63","./is.js":"4e63","./it":"c43f","./it-ch":"7e84","./it-ch.js":"7e84","./it.js":"c43f","./ja":"8ce9","./ja.js":"8ce9","./jv":"94eb","./jv.js":"94eb","./ka":"0403","./ka.js":"0403","./kk":"88d8","./kk.js":"88d8","./km":"4d4c","./km.js":"4d4c","./kn":"850c","./kn.js":"850c","./ko":"64d6","./ko.js":"64d6","./ku":"4b44","./ku.js":"4b44","./ky":"24ef","./ky.js":"24ef","./lb":"be7f","./lb.js":"be7f","./lo":"8272","./lo.js":"8272","./lt":"e8f0","./lt.js":"e8f0","./lv":"60a7","./lv.js":"60a7","./me":"7774","./me.js":"7774","./mi":"8539","./mi.js":"8539","./mk":"7df5","./mk.js":"7df5","./ml":"7a32","./ml.js":"7a32","./mn":"448b","./mn.js":"448b","./mr":"08f2","./mr.js":"08f2","./ms":"7791","./ms-my":"b784","./ms-my.js":"b784","./ms.js":"7791","./mt":"d4a5","./mt.js":"d4a5","./my":"2ec3","./my.js":"2ec3","./nb":"87e5","./nb.js":"87e5","./ne":"d894","./ne.js":"d894","./nl":"8ec6","./nl-be":"fa1e","./nl-be.js":"fa1e","./nl.js":"8ec6","./nn":"9a1d","./nn.js":"9a1d","./pa-in":"3ba6","./pa-in.js":"3ba6","./pl":"f017","./pl.js":"f017","./pt":"0c38","./pt-br":"b879","./pt-br.js":"b879","./pt.js":"0c38","./ro":"6da0","./ro.js":"6da0","./ru":"79cb","./ru.js":"79cb","./sd":"7bd2","./sd.js":"7bd2","./se":"0994","./se.js":"0994","./si":"4cee","./si.js":"4cee","./sk":"2be2","./sk.js":"2be2","./sl":"40ae","./sl.js":"40ae","./sq":"bf74","./sq.js":"bf74","./sr":"35dc","./sr-cyrl":"3c6b","./sr-cyrl.js":"3c6b","./sr.js":"35dc","./ss":"d81f","./ss.js":"d81f","./sv":"585e","./sv.js":"585e","./sw":"e15b","./sw.js":"e15b","./ta":"770d","./ta.js":"770d","./te":"e0c0","./te.js":"e0c0","./tet":"fe18","./tet.js":"fe18","./tg":"3e85","./tg.js":"3e85","./th":"398d","./th.js":"398d","./tl-ph":"502f","./tl-ph.js":"502f","./tlh":"7162","./tlh.js":"7162","./tr":"12a6","./tr.js":"12a6","./tzl":"7cdf","./tzl.js":"7cdf","./tzm":"e9c6","./tzm-latn":"a5d0","./tzm-latn.js":"a5d0","./tzm.js":"e9c6","./ug-cn":"27e4","./ug-cn.js":"27e4","./uk":"e8e9","./uk.js":"e8e9","./ur":"40d1","./ur.js":"40d1","./uz":"84bc","./uz-latn":"2aa3","./uz-latn.js":"2aa3","./uz.js":"84bc","./vi":"1272","./vi.js":"1272","./x-pseudo":"5bb75","./x-pseudo.js":"5bb75","./yo":"4038","./yo.js":"4038","./zh-cn":"6e33","./zh-cn.js":"6e33","./zh-hk":"2450","./zh-hk.js":"2450","./zh-tw":"c410","./zh-tw.js":"c410"};function i(e){var t=s(e);return n(t)}function s(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=s,e.exports=i,i.id="3113"},c3e8:function(e,t,n){},e5cd:function(e,t,n){"use strict";var r=n("c3e8"),i=n.n(r);i.a}});