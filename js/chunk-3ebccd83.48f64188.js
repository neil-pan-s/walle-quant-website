(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3ebccd83"],{"0ff3":function(e,t,r){"use strict";r.d(t,"c",(function(){return y})),r.d(t,"a",(function(){return g})),r.d(t,"b",(function(){return k}));r("a15b"),r("fb6a"),r("d3b7"),r("ac1f"),r("1276");var n=r("b85c");function a(e){if(Array.isArray(e))return e}r("a4d3"),r("e01a"),r("d28b"),r("3ca3"),r("ddb0");function s(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,a=!1,s=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done);n=!0)if(r.push(i.value),t&&r.length===t)break}catch(c){a=!0,s=c}finally{try{n||null==u["return"]||u["return"]()}finally{if(a)throw s}}return r}}var i=r("06c5");function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){return a(e)||s(e,t)||Object(i["a"])(e,t)||u()}r("96cf");var o=r("d4ec"),f=r("bee2"),p=r("ade3"),h=r("1da1"),l=r("3662"),b=function(){function e(t){Object(o["a"])(this,e),Object(p["a"])(this,"url",void 0),Object(p["a"])(this,"wss",void 0),Object(p["a"])(this,"callbacks",{open:[],message:[],close:[]}),Object(p["a"])(this,"retry",0),this.url=t}return Object(f["a"])(e,[{key:"start",value:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.url){e.next=2;break}return e.abrupt("return");case 2:this.wss=new WebSocket(this.url),this.wss.onopen=function(e){t.fire("open",e),t.retry=0},this.wss.onmessage=function(e){t.fire("message",e)},this.wss.onclose=function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.fire("close",r),!(t.retry>=3)){e.next=4;break}return e.next=4,t.wait(t.retry/3*60*1e3);case 4:t.retry++,t.start();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.intervalOfPing=setInterval((function(){t.wss.send("")}),6e4);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"wait",value:function(e){return new Promise((function(t){setTimeout(t,e)}))}},{key:"fire",value:function(e){if(this.callbacks[e].length){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];var s,i=Object(n["a"])(this.callbacks[e]);try{for(i.s();!(s=i.n()).done;){var u=s.value;u.apply(void 0,r)}}catch(c){i.e(c)}finally{i.f()}}}},{key:"on",value:function(e,t){this.callbacks[e].push(t)}},{key:"isRunning",value:function(){return this.wss&&1===+this.wss.readyState}},{key:"stop",value:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.url=null,this.callbacks={open:[],message:[],close:[]},this.intervalOfPing&&clearInterval(this.intervalOfPing),e.abrupt("return",this.wss&&this.wss.close());case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),e}(),v=r("c1df"),w=r.n(v);function d(e){return m.apply(this,arguments)}function m(){return m=Object(h["a"])(regeneratorRuntime.mark((function e(t){var r,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.type,n=t.url,a=t.data,e.abrupt("return",new Promise((function(e,t){window.$.ajax({type:r,url:n,dataType:"json",data:a,success:function(){e.apply(void 0,arguments)},error:function(){t.apply(void 0,arguments)}})})));case 2:case"end":return e.stop()}}),e)}))),m.apply(this,arguments)}var y=function(){function e(){Object(o["a"])(this,e),Object(p["a"])(this,"wss",void 0),Object(p["a"])(this,"running",!1),Object(p["a"])(this,"type","wss")}return Object(f["a"])(e,[{key:"use",value:function(e){this.type=e}},{key:"jsonp",value:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r="https://hq.sinajs.cn/list=".concat(t.join(",")),e.next=3,Object(l["a"])(r,null,document.querySelector("#scripts"));case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"request",value:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("wss"!==this.type){e.next=6;break}if(this.isRunning()){e.next=4;break}return e.next=4,this.startWss(t);case 4:e.next=8;break;case 6:return e.next=8,this.jsonp(t);case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"startWss",value:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.length){e.next=2;break}return e.abrupt("return");case 2:return r="http:"===location.protocol?"ws://w.sinajs.cn/wskt":"wss://w.sinajs.cn/wskt",e.next=5,this.stopWss();case 5:return e.next=7,this.jsonp(t);case 7:this.wss=new b(r+"?list="+t.join(",")),this.wss.on("message",(function(e){var t=e.data.split("="),r=c(t,2),n=r[0],a=r[1];window["hq_str_".concat(n)]=a})),this.wss.start(),this.running=!0;case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"isRunning",value:function(){return this.running}},{key:"stopWss",value:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.wss){e.next=3;break}return e.next=3,this.wss.stop();case 3:this.wss=null,this.running=!1;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),e}(),g=function(){function e(){Object(o["a"])(this,e)}return Object(f["a"])(e,[{key:"requestByWeek",value:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(){var t,r,a,s,i,u,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t="http://www.chinamoney.com.cn/ags/ms/cm-u-bond-publish/TicketPutAndBackStatByWeek",r={startWeek:"2002-26",endWeek:w()().format("YYYY-ww"),pageSize:1e4,pageNo:1},e.next=4,d({type:"post",url:t,data:r});case 4:a=e.sent,s=[],i=Object(n["a"])(a.data.resultList.reverse());try{for(i.s();!(u=i.n()).done;)c=u.value,s.push({time:c.startDate,value:+c.netPutIn})}catch(o){i.e(o)}finally{i.f()}return e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"requestByMonth",value:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(){var t,r,a,s,i,u,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t="http://www.chinamoney.com.cn/ags/ms/cm-u-bond-publish/TicketPutAndBackStatByMonth",r={startMonth:"2002-06",endMonth:w()().format("YYYY-MM"),pageSize:1e4,pageNo:1},e.next=4,d({type:"post",url:t,data:r});case 4:a=e.sent,s=[],i=Object(n["a"])(a.data.resultList.reverse());try{for(i.s();!(u=i.n()).done;)c=u.value,s.push({time:c.date,value:+c.netPutIn})}catch(o){i.e(o)}finally{i.f()}return e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"request",value:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(){var t,r=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:"week",e.abrupt("return","week"===t?this.requestByWeek():this.requestByMonth());case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),e}(),k=function(){function e(){Object(o["a"])(this,e)}return Object(f["a"])(e,[{key:"requestNetInFlow",value:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(t){var r,a,s,i,u,c,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r="https://push2his.eastmoney.com/api/qt/stock/fflow/daykline/get?lmt=0&klt=101&fields1=f1%2Cf2%2Cf3%2Cf7&fields2=f51%2Cf52%2Cf53%2Cf54%2Cf55%2Cf56%2Cf57%2Cf58%2Cf59%2Cf60%2Cf61%2Cf62%2Cf63%2Cf64%2Cf65&secid=".concat(t),e.next=3,d({type:"get",url:r});case 3:a=e.sent,s=[],i=Object(n["a"])(a.data.klines);try{for(i.s();!(u=i.n()).done;)c=u.value,o=c.split(","),s.push({time:o[0],value:+o[1]/1e8})}catch(f){i.e(f)}finally{i.f()}return e.abrupt("return",s);case 8:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"requestNorthInFlow",value:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(){var t,r,a,s,i,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t="https://datacenter.eastmoney.com/securities/api/data/get?type=RPT_MUTUAL_NETINFLOW_DETAILS&sty=ALL&source=DataCenter&client=WAP&p=&ps=&sr=1&st=TRADE_DATE&filter=(DIRECTION_TYPE=%221%22)(TIME_TYPE=%224%22)&showTime=1",e.next=3,d({type:"get",url:t});case 3:r=e.sent,a=[],s=Object(n["a"])(r.result.data);try{for(s.s();!(i=s.n()).done;)u=i.value,a.push({time:u["TRADE_DATE"].slice(0,10),value:+u["NET_INFLOW_BOTH"]/100})}catch(c){s.e(c)}finally{s.f()}return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"requestMargin",value:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(){var t,r,a,s,i,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t="https://datacenter.eastmoney.com/api/data/get?type=RPTA_RZRQ_LSHJ&sty=ALL&source=WEB&st=dim_date&sr=-1&p=1&ps=500&filter=&pageNo=1",e.next=3,d({type:"get",url:t});case 3:r=e.sent,a=[],s=Object(n["a"])(r.result.data.reverse());try{for(s.s();!(i=s.n()).done;)u=i.value,a.push({time:u["DIM_DATE"].slice(0,10),value:+u["RZRQYE"]/1e8,rzye:+u["RZYE"]/1e8,rqye:+u["RQYE"]/1e8})}catch(c){s.e(c)}finally{s.f()}return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"request",value:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(t){var r,n=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=n.length>1&&void 0!==n[1]?n[1]:"1.000300","netinflow"!==t){e.next=5;break}return e.abrupt("return",this.requestNetInFlow(r));case 5:if("northinflow"!==t){e.next=7;break}return e.abrupt("return",this.requestNorthInFlow());case 7:return e.abrupt("return",this.requestMargin());case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}()},"6fd1":function(e,t,r){"use strict";r("caad"),r("fb6a"),r("b680"),r("07ac"),r("ac1f"),r("1276");var n=r("b85c"),a=(r("96cf"),r("1da1")),s=r("d4ec"),i=r("bee2"),u=r("ade3"),c=r("3662"),o=r("0ff3"),f=function(){function e(){Object(s["a"])(this,e),Object(u["a"])(this,"crawler",new o["c"]),Object(u["a"])(this,"intervel",void 0),Object(u["a"])(this,"codes",{}),Object(u["a"])(this,"weights",{}),Object(u["a"])(this,"groups",{}),Object(u["a"])(this,"stocks",{}),Object(u["a"])(this,"globals",{})}return Object(i["a"])(e,[{key:"market",value:function(e){var t=e.slice(0,2);return["00","30","12"].includes(t)?"sz":["60","68","11"].includes(t)?"sh":void 0}},{key:"captureStockWeight",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var r,a,s,i,u,o,f;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,r="https://datainterface.eastmoney.com/EM_DataCenter/JS.aspx?type=SHSZZS&sty=SHSZZS&st=2&sr=-1&p=1&ps=500&js=var%20bSLQbtLZ={pages:(pc),data:[(x)]}&code=".concat(t),e.next=4,Object(c["a"])(r,null,document.querySelector("#scripts"));case 4:this.weights[t]={},this.codes[t]=[],a=Object(n["a"])(window.bSLQbtLZ.data);try{for(a.s();!(s=a.n()).done;)i=s.value,u=i.split(","),o=this.market(u[0])+u[0],f={code:o,name:u[1],weight:+u[12]},this.weights[t][o]=f,this.codes[t].push(o)}catch(p){a.e(p)}finally{a.f()}return e.abrupt("return",this.weights[t]);case 11:e.prev=11,e.t0=e["catch"](0);case 13:case"end":return e.stop()}}),e,this,[[0,11]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"captureGroups",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,r,a,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t="https://push2.eastmoney.com/api/qt/clist/get?cb=var%20bSLQbtLZ=&pn=1&pz=50&po=1&np=1&fltt=2&invt=2&fid=f20&fs=m:90+t:2+f:!50&fields=f1,f2,f3,f4,f5,f6,f7,f8,f9,f10,f12,f13,f14,f15,f16,f17,f18,f20,f21,f23,f24,f25,f26,f22,f33,f11,f62,f128,f136,f115,f152,f124,f107,f104,f105,f140,f141,f207,f208,f209,f222",e.next=4,Object(c["a"])(t,null,document.querySelector("#scripts"));case 4:this.groups={},r=Object(n["a"])(window.bSLQbtLZ.data.diff);try{for(r.s();!(a=r.n()).done;)s=a.value,i=+s.f20/1e12,this.groups[s.f14]={code:s.f12,name:s.f14,weight:i,change:+s.f3}}catch(u){r.e(u)}finally{r.f()}return e.abrupt("return",Object.values(this.groups));case 10:e.prev=10,e.t0=e["catch"](0);case 12:case"end":return e.stop()}}),e,this,[[0,10]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"captureStocks",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var r,a,s,i,u,c,o,f,p,h;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.crawler.request(t);case 3:r=[],a=Object(n["a"])(t);try{for(a.s();!(s=a.n()).done;){i=s.value;try{u=window["hq_str_".concat(i)].split(","),c=u[0],o=+u[2],f=+u[3],p=0===f?0:+((f-o)/o*100).toFixed(2),h={code:i,name:c,close:o,price:f,change:p},this.stocks[i]=h,r.push(h)}catch(l){}}}catch(b){a.e(b)}finally{a.f()}return e.abrupt("return",r);case 9:e.prev=9,e.t0=e["catch"](0);case 11:case"end":return e.stop()}}),e,this,[[0,9]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"captureGlobals",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,r,a,s,i,u,c,o,f,p,h;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t="sh000001,sz399001,sz399006,gb_dji,gb_ixic,gb_inx,hkHSI,znb_NKY,znb_UKX,znb_DAX,znb_CAC,znb_SX5E,znb_TWJQ,znb_KOSPI,znb_AS51,znb_GSPTSE,znb_XAX,znb_VIX,znb_N100,znb_AEX,znb_BEL20,znb_IBOV,znb_IBEX,znb_INDEXCF,znb_MXX,znb_SBX,znb_SWI20,znb_IPSA,znb_JCI,znb_CASE,znb_FBMEMAS,znb_MAR,znb_VN30".split(","),e.next=4,this.crawler.request(t);case 4:r=[],a=Object(n["a"])(t);try{for(a.s();!(s=a.n()).done;){i=s.value;try{u=window["hq_str_".concat(i)].split(","),c=void 0,o=void 0,f=void 0,p=void 0,c=u[0],["gb_dji","gb_ixic","gb_inx"].includes(i)?(o=+u[1],f=+u[2]):["sh000001","sz399001","sz399006"].includes(i)?(o=+u[3],p=+u[2],f=0===o?0:+((o-p)/p*100).toFixed(2)):"hkHSI"===i?(c=u[1],o=+u[6],f=+u[8]):(o=+u[1],f=+u[3]),h={code:i,name:c,price:o,change:f},this.stocks[i]=h,r.push(h)}catch(l){}}}catch(b){a.e(b)}finally{a.f()}return e.abrupt("return",r);case 10:e.prev=10,e.t0=e["catch"](0);case 12:case"end":return e.stop()}}),e,this,[[0,10]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"hookOfWeight",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,r){var s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.codes[t]){e.next=3;break}return e.next=3,this.captureStockWeight(t);case 3:return e.abrupt("return",Object(a["a"])(regeneratorRuntime.mark((function e(){var a,i,u,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s.captureStocks(s.codes[t]);case 2:a=e.sent,i=Object(n["a"])(a);try{for(i.s();!(u=i.n()).done;)c=u.value,c.weight=s.weights[t][c.code].weight}catch(o){i.e(o)}finally{i.f()}r(a);case 6:case"end":return e.stop()}}),e)}))));case 4:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"hookOfGroup",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r.captureGroups();case 2:n=e.sent,t(n);case 4:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"hookOfGloabal",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r.captureGlobals();case 2:n=e.sent,t(n);case 4:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"start",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var r,n,s,i=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=i.length>1&&void 0!==i[1]?i[1]:function(){},this.crawler.use("wss"),e.next=4,this.crawler.stopWss();case 4:if(n={group:this.hookOfGroup(r),global:this.hookOfGloabal(r)},!n[t]){e.next=11;break}return e.next=8,n[t];case 8:e.t0=e.sent,e.next=14;break;case 11:return e.next=13,this.hookOfWeight(t,r);case 13:e.t0=e.sent;case 14:return s=e.t0,e.next=17,s();case 17:clearInterval(this.intervel),this.intervel=setInterval(Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log("."),s();case 2:case"end":return e.stop()}}),e)}))),5e3);case 19:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"stop",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return clearInterval(this.intervel),e.next=3,this.crawler.stopWss();case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),e}();t["a"]=new f}}]);