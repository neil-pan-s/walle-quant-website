(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-342d9aee"],{"0ff3":function(e,t,r){"use strict";r.d(t,"c",(function(){return m})),r.d(t,"a",(function(){return g})),r.d(t,"b",(function(){return k}));r("a15b"),r("fb6a"),r("d3b7"),r("ac1f"),r("1276");var n=r("b85c");function a(e){if(Array.isArray(e))return e}r("a4d3"),r("e01a"),r("d28b"),r("3ca3"),r("ddb0");function s(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,a=!1,s=void 0;try{for(var u,i=e[Symbol.iterator]();!(n=(u=i.next()).done);n=!0)if(r.push(u.value),t&&r.length===t)break}catch(o){a=!0,s=o}finally{try{n||null==i["return"]||i["return"]()}finally{if(a)throw s}}return r}}var u=r("06c5");function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(e,t){return a(e)||s(e,t)||Object(u["a"])(e,t)||i()}r("96cf");var c=r("d4ec"),l=r("bee2"),f=r("ade3"),d=r("1da1"),p=r("3662"),h=function(){function e(t){Object(c["a"])(this,e),Object(f["a"])(this,"url",void 0),Object(f["a"])(this,"wss",void 0),Object(f["a"])(this,"callbacks",{open:[],message:[],close:[]}),Object(f["a"])(this,"retry",0),this.url=t}return Object(l["a"])(e,[{key:"start",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.url){e.next=2;break}return e.abrupt("return");case 2:this.wss=new WebSocket(this.url),this.wss.onopen=function(e){t.fire("open",e),t.retry=0},this.wss.onmessage=function(e){t.fire("message",e)},this.wss.onclose=function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.fire("close",r),!(t.retry>=3)){e.next=4;break}return e.next=4,t.wait(t.retry/3*60*1e3);case 4:t.retry++,t.start();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.intervalOfPing=setInterval((function(){t.wss.send("")}),6e4);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"wait",value:function(e){return new Promise((function(t){setTimeout(t,e)}))}},{key:"fire",value:function(e){if(this.callbacks[e].length){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];var s,u=Object(n["a"])(this.callbacks[e]);try{for(u.s();!(s=u.n()).done;){var i=s.value;i.apply(void 0,r)}}catch(o){u.e(o)}finally{u.f()}}}},{key:"on",value:function(e,t){this.callbacks[e].push(t)}},{key:"isRunning",value:function(){return this.wss&&1===+this.wss.readyState}},{key:"stop",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.url=null,this.callbacks={open:[],message:[],close:[]},this.intervalOfPing&&clearInterval(this.intervalOfPing),e.abrupt("return",this.wss&&this.wss.close());case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),e}(),b=r("c1df"),w=r.n(b);function y(e){return v.apply(this,arguments)}function v(){return v=Object(d["a"])(regeneratorRuntime.mark((function e(t){var r,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.type,n=t.url,a=t.data,e.abrupt("return",new Promise((function(e,t){window.$.ajax({type:r,url:n,dataType:"json",data:a,success:function(){e.apply(void 0,arguments)},error:function(){t.apply(void 0,arguments)}})})));case 2:case"end":return e.stop()}}),e)}))),v.apply(this,arguments)}var m=function(){function e(){Object(c["a"])(this,e),Object(f["a"])(this,"wss",void 0),Object(f["a"])(this,"running",!1),Object(f["a"])(this,"type","wss")}return Object(l["a"])(e,[{key:"use",value:function(e){this.type=e}},{key:"jsonp",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r="https://hq.sinajs.cn/list=".concat(t.join(",")),e.next=3,Object(p["a"])(r,null,document.querySelector("#scripts"));case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"request",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("wss"!==this.type){e.next=6;break}if(this.isRunning()){e.next=4;break}return e.next=4,this.startWss(t);case 4:e.next=8;break;case 6:return e.next=8,this.jsonp(t);case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"startWss",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.length){e.next=2;break}return e.abrupt("return");case 2:return r="http:"===location.protocol?"ws://w.sinajs.cn/wskt":"wss://w.sinajs.cn/wskt",e.next=5,this.stopWss();case 5:return e.next=7,this.jsonp(t);case 7:this.wss=new h(r+"?list="+t.join(",")),this.wss.on("message",(function(e){var t=e.data.split("="),r=o(t,2),n=r[0],a=r[1];window["hq_str_".concat(n)]=a})),this.wss.start(),this.running=!0;case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"isRunning",value:function(){return this.running}},{key:"stopWss",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.wss){e.next=3;break}return e.next=3,this.wss.stop();case 3:this.wss=null,this.running=!1;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),e}(),g=function(){function e(){Object(c["a"])(this,e)}return Object(l["a"])(e,[{key:"requestByWeek",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(){var t,r,a,s,u,i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t="http://www.chinamoney.com.cn/ags/ms/cm-u-bond-publish/TicketPutAndBackStatByWeek",r={startWeek:"2002-26",endWeek:w()().format("YYYY-ww"),pageSize:1e4,pageNo:1},e.next=4,y({type:"post",url:t,data:r});case 4:a=e.sent,s=[],u=Object(n["a"])(a.data.resultList.reverse());try{for(u.s();!(i=u.n()).done;)o=i.value,s.push({time:o.startDate,value:+o.netPutIn})}catch(c){u.e(c)}finally{u.f()}return e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"requestByMonth",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(){var t,r,a,s,u,i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t="http://www.chinamoney.com.cn/ags/ms/cm-u-bond-publish/TicketPutAndBackStatByMonth",r={startMonth:"2002-06",endMonth:w()().format("YYYY-MM"),pageSize:1e4,pageNo:1},e.next=4,y({type:"post",url:t,data:r});case 4:a=e.sent,s=[],u=Object(n["a"])(a.data.resultList.reverse());try{for(u.s();!(i=u.n()).done;)o=i.value,s.push({time:o.date,value:+o.netPutIn})}catch(c){u.e(c)}finally{u.f()}return e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"request",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(){var t,r=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:"week",e.abrupt("return","week"===t?this.requestByWeek():this.requestByMonth());case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),e}(),k=function(){function e(){Object(c["a"])(this,e)}return Object(l["a"])(e,[{key:"requestNetInFlow",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(t){var r,a,s,u,i,o,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r="https://push2his.eastmoney.com/api/qt/stock/fflow/daykline/get?lmt=0&klt=101&fields1=f1%2Cf2%2Cf3%2Cf7&fields2=f51%2Cf52%2Cf53%2Cf54%2Cf55%2Cf56%2Cf57%2Cf58%2Cf59%2Cf60%2Cf61%2Cf62%2Cf63%2Cf64%2Cf65&secid=".concat(t),e.next=3,y({type:"get",url:r});case 3:a=e.sent,s=[],u=Object(n["a"])(a.data.klines);try{for(u.s();!(i=u.n()).done;)o=i.value,c=o.split(","),s.push({time:c[0],value:+c[1]/1e8})}catch(l){u.e(l)}finally{u.f()}return e.abrupt("return",s);case 8:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"requestNorthInFlow",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(){var t,r,a,s,u,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t="https://datacenter.eastmoney.com/securities/api/data/get?type=RPT_MUTUAL_NETINFLOW_DETAILS&sty=ALL&source=DataCenter&client=WAP&p=&ps=&sr=1&st=TRADE_DATE&filter=(DIRECTION_TYPE=%221%22)(TIME_TYPE=%224%22)&showTime=1",e.next=3,y({type:"get",url:t});case 3:r=e.sent,a=[],s=Object(n["a"])(r.result.data);try{for(s.s();!(u=s.n()).done;)i=u.value,a.push({time:i["TRADE_DATE"].slice(0,10),value:+i["NET_INFLOW_BOTH"]/100})}catch(o){s.e(o)}finally{s.f()}return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"requestMargin",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(){var t,r,a,s,u,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t="https://datacenter.eastmoney.com/api/data/get?type=RPTA_RZRQ_LSHJ&sty=ALL&source=WEB&st=dim_date&sr=-1&p=1&ps=500&filter=&pageNo=1",e.next=3,y({type:"get",url:t});case 3:r=e.sent,a=[],s=Object(n["a"])(r.result.data.reverse());try{for(s.s();!(u=s.n()).done;)i=u.value,a.push({time:i["DIM_DATE"].slice(0,10),rzrqye:+i["RZRQYE"]/1e8,rzye:+i["RZYE"]/1e8,rqye:+i["RQYE"]/1e8})}catch(o){s.e(o)}finally{s.f()}return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"requestCurrency",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(){var t,r,a,s,u,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t="https://datainterface.eastmoney.com/EM_DataCenter/JS.aspx?cb=_datatable7520656=&type=GJZB&sty=ZGZB&js=(%7Bdata%3A%5B(x)%5D%2Cpages%3A(pc)%7D)&p=1&ps=10000&mkt=11",e.next=3,Object(p["a"])(t,null,document.querySelector("#scripts"));case 3:r=[],a=Object(n["a"])(window._datatable7520656.data.reverse());try{for(a.s();!(s=a.n()).done;)u=s.value,i=u.split(","),r.push({time:i[0],m2:{value:+i[1],ratioY:+i[2],ratioM:+i[3]},m1:{value:+i[4],ratioY:+i[5],ratioM:+i[6]},m0:{value:+i[7],ratioY:+i[8],ratioM:+i[9]}})}catch(o){a.e(o)}finally{a.f()}return e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"request",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(t){var r,n,a=this,s=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:"1.000300",n={netinflow:function(){return a.requestNetInFlow(r)},northinflow:function(){return a.requestNorthInFlow()},margin:function(){return a.requestMargin()},currency:function(){return a.requestCurrency()}},e.abrupt("return",n[t]());case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}()},"9afb":function(e,t,r){"use strict";r("e8fc")},e8fc:function(e,t,r){},f7a7:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"statistic"},[r("canvas",{ref:"canvas"})])},a=[],s=(r("fb6a"),r("b680"),r("b85c")),u=(r("96cf"),r("1da1")),i=r("30ef"),o=r.n(i),c=r("0ff3"),l={red:"rgb(255, 99, 132)",orange:"rgb(255, 159, 64)",yellow:"rgb(255, 205, 86)",green:"rgb(19, 206, 102)",blue:"rgb(54, 162, 235)",purple:"rgb(153, 102, 255)",grey:"rgb(201, 203, 207)"},f={data:function(){return{chartsInstance:null,config:{type:"line",data:{labels:[],datasets:[]},options:{responsive:!0,legend:{display:!0},title:{display:!0,text:""},animation:{duration:10},tooltips:{mode:"index",intersect:!1},hover:{mode:"nearest",intersect:!0},scales:{xAxes:[{display:!0,scaleLabel:{display:!0,labelString:"Time"}}],yAxes:[{display:!0,scaleLabel:{display:!0,labelString:"Value"}}]}}}}},mounted:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=e.$refs.canvas.getContext("2d"),e.chartsInstance=new o.a(r,e.config),e.show();case 3:case"end":return t.stop()}}),t)})))()},watch:{"$route.query.type":function(){this.show()}},methods:{show:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.$route.query.type||"currency",n={currency:function(){return e.showCurrency()},"currency-ratio":function(){return e.showCurrencyRatio()},netinflow:function(){return e.showNetInFlow()},northinflow:function(){return e.showNorthInFlow()},margin:function(){return e.showMargin()}},t.next=4,n[r]();case 4:document.body.scrollTop=0;case 5:case"end":return t.stop()}}),t)})))()},showNetInFlow:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var r,n,a,u,i,o,f,d;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=new c["b"],n=e.$route.query.symbol||"1.000300",t.next=4,r.request("netinflow",n);case 4:a=t.sent,u={labels:[],datasets:[{label:"主力净流入(亿)",fill:!1,backgroundColor:l.blue,borderColor:l.blue,data:[]},{label:"主力累计净流入(亿)",fill:!1,backgroundColor:l.red,borderColor:l.red,data:[]}]},i=0,o=Object(s["a"])(a);try{for(o.s();!(f=o.n()).done;)d=f.value,u.labels.push(d.time),i+=d.value,u.datasets[0].data.push(d.value.toFixed(2)),u.datasets[1].data.push(i.toFixed(2))}catch(p){o.e(p)}finally{o.f()}e.config.options.title.text="沪深主力净流入统计 (".concat(n,")"),e.update(u);case 11:case"end":return t.stop()}}),t)})))()},showNorthInFlow:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var r,n,a,u,i,o,f;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=new c["b"],t.next=3,r.request("northinflow");case 3:n=t.sent,n=n.slice(-200),a={labels:[],datasets:[{label:"北向净流入(亿)",fill:!1,backgroundColor:l.blue,borderColor:l.blue,data:[]},{label:"北向累计净流入(亿)",fill:!1,backgroundColor:l.red,borderColor:l.red,data:[]}]},u=0,i=Object(s["a"])(n);try{for(i.s();!(o=i.n()).done;)f=o.value,a.labels.push(f.time),u+=f.value,a.datasets[0].data.push(f.value.toFixed(2)),a.datasets[1].data.push(u.toFixed(2))}catch(d){i.e(d)}finally{i.f()}e.config.options.title.text="北向资金净流入统计",e.update(a);case 11:case"end":return t.stop()}}),t)})))()},showMargin:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var r,n,a,u,i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=new c["b"],t.next=3,r.request("margin");case 3:n=t.sent,n=n.slice(-200),a={labels:[],datasets:[{label:"融资融券余额(亿)",fill:!1,backgroundColor:l.blue,borderColor:l.blue,data:[]},{label:"融券余额(亿)",fill:!1,backgroundColor:l.green,borderColor:l.green,data:[]},{label:"融资余额(亿)",fill:!1,backgroundColor:l.red,borderColor:l.red,data:[]}]},u=Object(s["a"])(n);try{for(u.s();!(i=u.n()).done;)o=i.value,a.labels.push(o.time),a.datasets[0].data.push(o.rzrqye.toFixed(2)),a.datasets[1].data.push(o.rqye.toFixed(2)),a.datasets[2].data.push(o.rzye.toFixed(2))}catch(f){u.e(f)}finally{u.f()}e.config.options.title.text="融资融券余额统计",e.update(a);case 10:case"end":return t.stop()}}),t)})))()},showCurrency:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var r,n,a,u,i,o,f;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=new c["a"],t.next=3,r.request("month");case 3:n=t.sent,a={labels:[],datasets:[{label:"央行净投放(亿)",fill:!1,backgroundColor:l.blue,borderColor:l.blue,data:[]},{label:"央行累计净投放(亿)",fill:!1,backgroundColor:l.red,borderColor:l.red,data:[]}]},u=0,i=Object(s["a"])(n);try{for(i.s();!(o=i.n()).done;)f=o.value,a.labels.push(f.time),u+=f.value,a.datasets[0].data.push(f.value.toFixed(2)),a.datasets[1].data.push(u.toFixed(2))}catch(d){i.e(d)}finally{i.f()}e.config.options.title.text="央行货币净投放与净回笼统计",e.update(a);case 10:case"end":return t.stop()}}),t)})))()},showCurrencyRatio:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var r,n,a,u,i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=new c["b"],t.next=3,r.request("currency");case 3:n=t.sent,a={labels:[],datasets:[{label:"M2(亿)",fill:!1,backgroundColor:l.purple,borderColor:l.purple,data:[]},{label:"M1(亿)",fill:!1,backgroundColor:l.blue,borderColor:l.blue,data:[]},{label:"M0(亿)",fill:!1,backgroundColor:l.yellow,borderColor:l.yellow,data:[]},{label:"流动性比率(M1/M2)%",fill:!1,backgroundColor:l.red,borderColor:l.red,data:[]},{label:"M2同比增长(%)",fill:!1,backgroundColor:l.green,borderColor:l.green,data:[]},{label:"M1同比增长(%)",fill:!1,backgroundColor:l.orange,borderColor:l.orange,data:[]},{label:"M0同比增长(%)",fill:!1,backgroundColor:l.gray,borderColor:l.gray,data:[]}]},u=Object(s["a"])(n);try{for(u.s();!(i=u.n()).done;)o=i.value,a.labels.push(o.time),a.datasets[0].data.push(o.m2.value.toFixed(2)),a.datasets[1].data.push(o.m1.value.toFixed(2)),a.datasets[2].data.push(o.m0.value.toFixed(2)),a.datasets[3].data.push((o.m1.value/o.m2.value).toFixed(2)),a.datasets[4].data.push(o.m2.ratioY.toFixed(2)),a.datasets[5].data.push(o.m1.ratioY.toFixed(2)),a.datasets[6].data.push(o.m0.ratioY.toFixed(2))}catch(f){u.e(f)}finally{u.f()}e.config.options.title.text="货币流动性比率统计",e.update(a);case 9:case"end":return t.stop()}}),t)})))()},destory:function(){this.chartsInstance&&this.chartsInstance.destroy()},clear:function(){this.chartsInstance&&this.update({stocks:[]})},update:function(e){var t=e.labels,r=e.datasets;this.config.data.labels=t,this.config.data.datasets=r,this.chartsInstance&&this.chartsInstance.update(this.config)}}},d=f,p=(r("9afb"),r("2877")),h=Object(p["a"])(d,n,a,!1,null,"4e483597",null);t["default"]=h.exports}}]);